d3=function(){function l(e){return e!=null&&!isNaN(e)}function h(e){return e.length}function p(e){var t=1;while(e*t%1)t*=10;return t}function d(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function v(){}function y(){}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function w(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=E.length;n<r;++n){var i=E[n]+t;if(i in e)return i}}function x(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}function T(e){return Array.prototype.slice.call(e)}function C(){}function k(){}function L(e){function r(){var n=t,r=-1,i=n.length,s;while(++r<i)(s=n[r].on)&&s.apply(this,arguments);return e}var t=[],n=new v;r.on=function(r,i){var s=n.get(r),o;if(arguments.length<2)return s&&s.on;if(s){s.on=null;t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1));n.remove(r)}i&&t.push(n.set(r,{on:i}));return e};return r}function A(){e.event.preventDefault()}function O(){var t=e.event,n;while(n=t.sourceEvent)t=n;return t}function M(t){var n=new k,r=0,i=arguments.length;while(++r<i)n[arguments[r]]=L(n);n.of=function(r,i){return function(s){try{var o=s.sourceEvent=e.event;s.target=t;e.event=s;n[s.type].apply(r,i)}finally{e.event=o}}};return n}function P(e){D(e,I);return e}function q(e){return typeof e=="function"?e:function(){return H(e,this)}}function R(e){return typeof e=="function"?e:function(){return B(e,this)}}function z(t,n){function r(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function s(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}t=e.ns.qualify(t);return n==null?t.local?i:r:typeof n=="function"?t.local?a:u:t.local?o:s}function W(e){return e.trim().replace(/\s+/g," ")}function X(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function V(e,t){function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}e=e.trim().split(/\s+/).map($);var n=e.length;return typeof t=="function"?i:r}function $(e){var t=X(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";if(r){t.lastIndex=0;t.test(i)||n.setAttribute("class",W(i+" "+e))}else n.setAttribute("class",W(i.replace(t," ")))}}function J(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return t==null?r:typeof t=="function"?s:i}function K(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return t==null?n:typeof t=="function"?i:r}function Q(n){return typeof n=="function"?n:(n=e.ns.qualify(n)).local?function(){return t.createElementNS(n.space,n.local)}:function(){return t.createElementNS(this.namespaceURI,n)}}function G(e){return{__data__:e}}function Y(e){return function(){return F(this,e)}}function Z(t){arguments.length||(t=e.ascending);return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function et(e,t){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],s=0,o=i.length,u;s<o;s++)(u=i[s])&&t(u,s,n);return e}function tt(e){D(e,nt);return e}function rt(e){var t,n;return function(r,i,s){var o=e[s].update,u=o.length,a;s!=n&&(n=s,t=0);i>=t&&(t=i+1);while(!(a=o[t])&&++t<u);return a}}function st(t,n,r){function a(){var e=this[i];if(e){this.removeEventListener(t,e,e.$);delete this[i]}}function f(){var e=o(n,S(arguments));a.call(this);this.addEventListener(t,this[i]=e,e.$=r);e._=n}function l(){var n=new RegExp("^__on([^.]+)"+e.requote(t)+"$"),r;for(var i in this)if(r=i.match(n)){var s=this[i];this.removeEventListener(r[1],s,s.$);delete this[i]}}var i="__on"+t,s=t.indexOf("."),o=ut;s>0&&(t=t.substring(0,s));var u=ot.get(t);u&&(t=u,o=at);return s?n?f:a:n?C:l}function ut(t,n){return function(r){var i=e.event;e.event=r;n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=i}}}function at(e,t){var n=ut(e,t);return function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!(r.compareDocumentPosition(t)&8))&&n.call(t,e)}}function ct(){var t=".dragsuppress-"+ ++lt,i="touchmove"+t,s="selectstart"+t,o="dragstart"+t,u="click"+t,a=e.select(r).on(i,A).on(s,A).on(o,A),f=n.style,l=f[ft];f[ft]="none";return function(e){a.on(t,null);f[ft]=l;if(e){function n(){a.on(u,null)}a.on(u,function(){A();n()},!0);setTimeout(n,0)}}}function pt(t,n){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var s=i.createSVGPoint();if(ht<0&&(r.scrollX||r.scrollY)){i=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=i[0][0].getScreenCTM();ht=!o.f&&!o.e;i.remove()}if(ht){s.x=n.pageX;s.y=n.pageY}else{s.x=n.clientX;s.y=n.clientY}s=s.matrixTransform(t.getScreenCTM().inverse());return[s.x,s.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function gt(){}function yt(e,t,n){return new bt(e,t,n)}function bt(e,t,n){this.h=e;this.s=t;this.l=n}function Et(e,t,n){function s(e){e>360?e-=360:e<0&&(e+=360);return e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;n=n<0?0:n>1?1:n;i=n<=.5?n*(1+t):n+t-n*t;r=2*n-i;return Gt(o(e+120),o(e),o(e-120))}function kt(e){return e>0?1:e<0?-1:0}function Lt(e){return e>1?0:e<-1?St:Math.acos(e)}function At(e){return e>1?St/2:e<-1?-St/2:Math.asin(e)}function Ot(e){return(Math.exp(e)-Math.exp(-e))/2}function Mt(e){return(Math.exp(e)+Math.exp(-e))/2}function _t(e){return(e=Math.sin(e/2))*e}function Dt(e,t,n){return new Pt(e,t,n)}function Pt(e,t,n){this.h=e;this.c=t;this.l=n}function Bt(e,t,n){isNaN(e)&&(e=0);isNaN(t)&&(t=0);return jt(n,Math.cos(e*=Nt)*t,Math.sin(e)*t)}function jt(e,t,n){return new Ft(e,t,n)}function Ft(e,t,n){this.l=e;this.a=t;this.b=n}function Wt(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;i=Vt(i)*qt;r=Vt(r)*Rt;s=Vt(s)*Ut;return Gt(Jt(3.2404542*i-1.5371385*r-.4985314*s),Jt(-0.969266*i+1.8760108*r+.041556*s),Jt(.0556434*i-.2040259*r+1.0572252*s))}function Xt(e,t,n){return e>0?Dt(Math.atan2(n,t)*Ct,Math.sqrt(t*t+n*n),e):Dt(NaN,NaN,e)}function Vt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function $t(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function Jt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function Kt(e){return Gt(e>>16,e>>8&255,e&255)}function Qt(e){return Kt(e)+""}function Gt(e,t,n){return new Yt(e,t,n)}function Yt(e,t,n){this.r=e;this.g=t;this.b=n}function en(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function tn(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(on(u[0]),on(u[1]),on(u[2]))}}if(a=un.get(e))return t(a.r,a.g,a.b);if(e!=null&&e.charAt(0)==="#"){if(e.length===4){r=e.charAt(1);r+=r;i=e.charAt(2);i+=i;s=e.charAt(3);s+=s}else if(e.length===7){r=e.substring(1,3);i=e.substring(3,5);s=e.substring(5,7)}r=parseInt(r,16);i=parseInt(i,16);s=parseInt(s,16)}return t(r,i,s)}function nn(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;if(s){u=a<.5?s/(i+r):s/(2-i-r);e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4;o*=60}else{o=NaN;u=a>0&&a<1?0:o}return yt(o,u,a)}function rn(e,t,n){e=sn(e);t=sn(t);n=sn(n);var r=$t((.4124564*e+.3575761*t+.1804375*n)/qt),i=$t((.2126729*e+.7151522*t+.072175*n)/Rt),s=$t((.0193339*e+.119192*t+.9503041*n)/Ut);return jt(116*i-16,500*(r-i),200*(i-s))}function sn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function on(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function an(e){return typeof e=="function"?e:function(){return e}}function fn(e){return e}function ln(e){return function(t,n,r){arguments.length===2&&typeof n=="function"&&(r=n,n=null);return cn(t,n,e,r)}}function cn(t,n,i,s){function c(){var e=f.status,t;if(!e&&f.responseText||e>=200&&e<300||e===304){try{t=i.call(o,f)}catch(n){u.error.call(o,n);return}u.load.call(o,t)}else u.error.call(o,f)}var o={},u=e.dispatch("progress","load","error"),a={},f=new XMLHttpRequest,l=null;r.XDomainRequest&&!("withCredentials"in f)&&/^(http(s)?:)?\/\//.test(t)&&(f=new XDomainRequest);"onload"in f?f.onload=f.onerror=c:f.onreadystatechange=function(){f.readyState>3&&c()};f.onprogress=function(t){var n=e.event;e.event=t;try{u.progress.call(o,f)}finally{e.event=n}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return a[e];t==null?delete a[e]:a[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return n;n=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return l;l=e;return o};o.response=function(e){i=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(S(arguments)))}});o.send=function(e,r,i){arguments.length===2&&typeof r=="function"&&(i=r,r=null);f.open(e,t,!0);n!=null&&!("accept"in a)&&(a.accept=n+",*/*");if(f.setRequestHeader)for(var s in a)f.setRequestHeader(s,a[s]);n!=null&&f.overrideMimeType&&f.overrideMimeType(n);l!=null&&(f.responseType=l);i!=null&&o.on("error",i).on("load",function(e){i(null,e)});f.send(r==null?null:r);return o};o.abort=function(){f.abort();return o};e.rebind(o,u,"on");return s==null?o:o.get(hn(s))}function hn(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function bn(){var e=En(),t=Sn()-e;if(t>24){if(isFinite(t)){clearTimeout(mn);mn=setTimeout(bn,t)}vn=0}else{vn=1;yn(bn)}}function wn(e,t,n){var r=arguments.length;r<2&&(t=0);r<3&&(n=Date.now());gn.callback=e;gn.time=n+t}function En(){var e=Date.now();gn=pn;while(gn){e>=gn.time&&(gn.flush=gn.callback(e-gn.time));gn=gn.next}return e}function Sn(){var e,t=pn,n=Infinity;while(t)if(t.flush)t=e?e.next=t.next:pn=t.next;else{t.time<n&&(n=t.time);t=(e=t).next}dn=e;return n}function Ln(e,t){var n=Math.pow(10,Math.abs(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Mn(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function _n(e){return e+""}function Hn(){}function jn(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function Fn(e,t){e&&qn.hasOwnProperty(e.type)&&qn[e.type](e,t)}function Rn(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1]);t.lineEnd()}function Un(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)Rn(e[n],t,1);t.polygonEnd()}function Vn(){function s(e,t){e*=Nt;t=t*Nt/2+St/4;var s=e-n,o=Math.cos(t),u=Math.sin(t),a=i*u,f=r*o+a*Math.cos(s),l=a*Math.sin(s);Wn.add(Math.atan2(l,f));n=e,r=o,i=u}var e,t,n,r,i;Xn.point=function(o,u){Xn.point=s;n=(e=o)*Nt,r=Math.cos(u=(t=u)*Nt/2+St/4),i=Math.sin(u)};Xn.lineEnd=function(){s(e,t)}}function $n(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Qn(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Gn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Yn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Zn(e){return[Math.atan2(e[1],e[0]),At(e[2])]}function er(e,t){return Math.abs(e[0]-t[0])<xt&&Math.abs(e[1]-t[1])<xt}function pr(e,t){e*=Nt;var n=Math.cos(t*=Nt);dr(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function dr(e,t,n){++tr;rr+=(e-rr)/tr;ir+=(t-ir)/tr;sr+=(n-sr)/tr}function vr(){function r(r,i){r*=Nt;var s=Math.cos(i*=Nt),o=s*Math.cos(r),u=s*Math.sin(r),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=t*a-n*u)*f+(f=n*o-e*a)*f+(f=e*u-t*o)*f),e*o+t*u+n*a);nr+=f;or+=f*(e+(e=o));ur+=f*(t+(t=u));ar+=f*(n+(n=a));dr(e,t,n)}var e,t,n;hr.point=function(i,s){i*=Nt;var o=Math.cos(s*=Nt);e=o*Math.cos(i);t=o*Math.sin(i);n=Math.sin(s);hr.point=r;dr(e,t,n)}}function mr(){hr.point=pr}function gr(){function s(e,t){e*=Nt;var s=Math.cos(t*=Nt),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(t),f=r*a-i*u,l=i*o-n*a,c=n*u-r*o,h=Math.sqrt(f*f+l*l+c*c),p=n*o+r*u+i*a,d=h&&-Lt(p)/h,v=Math.atan2(h,p);fr+=d*f;lr+=d*l;cr+=d*c;nr+=v;or+=v*(n+(n=o));ur+=v*(r+(r=u));ar+=v*(i+(i=a));dr(n,r,i)}var e,t,n,r,i;hr.point=function(o,u){e=o,t=u;hr.point=s;o*=Nt;var a=Math.cos(u*=Nt);n=a*Math.cos(o);r=a*Math.sin(o);i=Math.sin(u);dr(n,r,i)};hr.lineEnd=function(){s(e,t);hr.lineEnd=mr;hr.point=pr}}function yr(){return!0}function br(e,t,n,r,i){var s=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(er(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}var a={point:n,points:e,other:null,visited:!1,entry:!0,subject:!0},f={point:n,points:[n],other:a,visited:!1,entry:!1,subject:!1};a.other=f;s.push(a);o.push(f);a={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0};f={point:r,points:[r],other:a,visited:!1,entry:!0,subject:!1};a.other=f;s.push(a);o.push(f)});o.sort(t);wr(s);wr(o);if(!s.length)return;if(n)for(var u=1,a=!n(o[0].point),f=o.length;u<f;++u)o[u].entry=a=!a;var l=s[0],c,h,p;for(;;){c=l;while(c.visited)if((c=c.next)===l)return;h=c.points;i.lineStart();do{c.visited=c.other.visited=!0;if(c.entry){if(c.subject)for(var u=0;u<h.length;u++)i.point((p=h[u])[0],p[1]);else r(c.point,c.next.point,1,i);c=c.next}else{if(c.subject){h=c.prev.points;for(var u=h.length;--u>=0;)i.point((p=h[u])[0],p[1])}else r(c.point,c.prev.point,-1,i);c=c.prev}c=c.other;h=c.points}while(!c.visited);i.lineEnd()}}function wr(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t){r.next=i=e[n];i.prev=r;r=i}r.next=i=e[0];i.prev=r}function Er(t,n,r,i){return function(s){function a(e,n){t(e,n)&&s.point(e,n)}function f(e,t){o.point(e,t)}function l(){u.point=f;o.lineStart()}function c(){u.point=a;o.lineEnd()}function g(e,t){d.point(e,t);m.push([e,t])}function y(){d.lineStart();m=[]}function b(){g(m[0][0],m[0][1]);d.lineEnd();var e=d.clean(),t=p.buffer(),n,r=t.length;m.pop();v.push(m);m=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,o;s.lineStart();while(++i<r)s.point((o=n[i])[0],o[1]);s.lineEnd();return}r>1&&e&2&&t.push(t.pop().concat(t.shift()));h.push(t.filter(Sr))}var o=n(s),u={point:a,lineStart:l,lineEnd:c,polygonStart:function(){u.point=g;u.lineStart=y;u.lineEnd=b;h=[];v=[];s.polygonStart()},polygonEnd:function(){u.point=a;u.lineStart=l;u.lineEnd=c;h=e.merge(h);if(h.length)br(h,Tr,null,r,s);else if(i(v)){s.lineStart();r(null,null,1,s);s.lineEnd()}s.polygonEnd();h=v=null},sphere:function(){s.polygonStart();s.lineStart();r(null,null,1,s);s.lineEnd();s.polygonEnd()}},h,p=xr(),d=n(p),v,m;return u}}function Sr(e){return e.length>1}function xr(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:C,buffer:function(){var n=e;e=[];t=null;return n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Tr(e,t){return((e=e.point)[0]<0?e[1]-St/2-xt:St/2-e[1])-((t=t.point)[0]<0?t[1]-St/2-xt:St/2-t[1])}function Nr(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=!1,u=!1,a=0;Wn.reset();for(var f=0,l=t.length;f<l;++f){var c=t[f],h=c.length;if(!h)continue;var p=c[0],d=p[0],v=p[1]/2+St/4,m=Math.sin(v),g=Math.cos(v),y=1;for(;;){y===h&&(y=0);e=c[y];var b=e[0],w=e[1]/2+St/4,E=Math.sin(w),S=Math.cos(w),x=b-d,T=Math.abs(x)>St,N=m*E;Wn.add(Math.atan2(N*Math.sin(x),g*S+N*Math.cos(x)));Math.abs(w)<xt&&(u=!0);s+=T?x+(x>=0?2:-2)*St:x;if(T^d>=n^b>=n){var C=Kn($n(p),$n(e));Yn(C);var k=Kn(i,C);Yn(k);var L=(T^x>=0?-1:1)*At(k[2]);r>L&&(a+=T^x>=0?1:-1)}if(!(y++))break;d=b,m=E,g=S,p=e}Math.abs(s)>xt&&(o=!0)}return(!u&&!o&&Wn<0||s<-xt)^a&1}function kr(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart();i=1},point:function(s,o){var u=s>0?St:-St,a=Math.abs(s-t);if(Math.abs(a-St)<xt){e.point(t,n=(n+o)/2>0?St/2:-St/2);e.point(r,n);e.lineEnd();e.lineStart();e.point(u,n);e.point(s,n);i=0}else if(r!==u&&a>=St){Math.abs(t-r)<xt&&(t-=r*xt);Math.abs(s-u)<xt&&(s-=u*xt);n=Lr(t,n,s,o);e.point(r,n);e.lineEnd();e.lineStart();e.point(u,n);i=0}e.point(t=s,n=o);r=u},lineEnd:function(){e.lineEnd();t=n=NaN},clean:function(){return 2-i}}}function Lr(e,t,n,r){var i,s,o=Math.sin(e-n);return Math.abs(o)>xt?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Ar(e,t,n,r){var i;if(e==null){i=n*St/2;r.point(-St,i);r.point(0,i);r.point(St,i);r.point(St,0);r.point(St,-i);r.point(0,-i);r.point(-St,-i);r.point(-St,0);r.point(-St,i)}else if(Math.abs(e[0]-t[0])>xt){var s=(e[0]<t[0]?1:-1)*St;i=n*s/2;r.point(-s,i);r.point(0,i);r.point(s,i)}else r.point(t[0],t[1])}function Mr(e){return Nr(Or,e)}function _r(e){function o(e,n){return Math.cos(e)*Math.cos(n)>t}function u(e){var t,r,s,u,l;return{lineStart:function(){u=s=!1;l=1},point:function(c,h){var p=[c,h],d,v=o(c,h),m=n?v?0:f(c,h):v?f(c+(c<0?St:-St),h):0;!t&&(u=s=v)&&e.lineStart();if(v!==s){d=a(t,p);if(er(t,d)||er(p,d)){p[0]+=xt;p[1]+=xt;v=o(p[0],p[1])}}if(v!==s){l=0;if(v){e.lineStart();d=a(p,t);e.point(d[0],d[1])}else{d=a(t,p);e.point(d[0],d[1]);e.lineEnd()}t=d}else if(i&&t&&n^v){var g;if(!(m&r)&&(g=a(p,t,!0))){l=0;if(n){e.lineStart();e.point(g[0][0],g[0][1]);e.point(g[1][0],g[1][1]);e.lineEnd()}else{e.point(g[1][0],g[1][1]);e.lineEnd();e.lineStart();e.point(g[0][0],g[0][1])}}}v&&(!t||!er(t,p))&&e.point(p[0],p[1]);t=p,s=v,r=m},lineEnd:function(){s&&e.lineEnd();t=null},clean:function(){return l|(u&&s)<<1}}}function a(e,n,r){var i=$n(e),s=$n(n),o=[1,0,0],u=Kn(i,s),a=Jn(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=t*a/l,h=-t*f/l,p=Kn(o,u),d=Gn(o,c),v=Gn(u,h);Qn(d,v);var m=p,g=Jn(d,m),y=Jn(m,m),b=g*g-y*(Jn(d,d)-1);if(b<0)return;var w=Math.sqrt(b),E=Gn(m,(-g-w)/y);Qn(E,d);E=Zn(E);if(!r)return E;var S=e[0],x=n[0],T=e[1],N=n[1],C;x<S&&(C=S,S=x,x=C);var k=x-S,L=Math.abs(k-St)<xt,A=L||k<xt;!L&&N<T&&(C=T,T=N,N=C);if(A?L?T+N>0^E[1]<(Math.abs(E[0]-S)<xt?T:N):T<=E[1]&&E[1]<=N:k>St^(S<=E[0]&&E[0]<=x)){var O=Gn(m,(-g+w)/y);Qn(O,d);return[E,Zn(O)]}}function f(t,r){var i=n?e:St-e,s=0;t<-i?s|=1:t>i&&(s|=2);r<-i?s|=4:r>i&&(s|=8);return s}function l(e){return Nr(r,e)}var t=Math.cos(e),n=t>0,r=[e,0],i=Math.abs(t)>xt,s=pi(e,6*Nt);return Er(o,u,s,l)}function Pr(t,n,r,i){function s(e,i){return Math.abs(e[0]-t)<xt?i>0?0:3:Math.abs(e[0]-r)<xt?i>0?2:1:Math.abs(e[1]-n)<xt?i>0?1:0:i>0?3:2}function o(e,t){return u(e.point,t.point)}function u(e,t){var n=s(e,1),r=s(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}function a(e,s){var o=s[0]-e[0],u=s[1]-e[1],a=[0,1];if(Math.abs(o)<xt&&Math.abs(u)<xt)return t<=e[0]&&e[0]<=r&&n<=e[1]&&e[1]<=i;if(Hr(t-e[0],o,a)&&Hr(e[0]-r,-o,a)&&Hr(n-e[1],u,a)&&Hr(e[1]-i,-u,a)){if(a[1]<1){s[0]=e[0]+a[1]*o;s[1]=e[1]+a[1]*u}if(a[0]>0){e[0]+=a[0]*o;e[1]+=a[0]*u}return!0}return!1}return function(f){function m(e){var o=s(e,-1),u=g([o===0||o===3?t:r,o>1?i:n]);return u}function g(e){var t=0,n=p.length,r=e[1];for(var i=0;i<n;++i)for(var s=1,o=p[i],u=o.length,a=o[0],f;s<u;++s){f=o[s];a[1]<=r?f[1]>r&&y(a,f,e)>0&&++t:f[1]<=r&&y(a,f,e)<0&&--t;a=f}return t!==0}function y(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function b(e,o,a,f){var l=0,c=0;if(e==null||(l=s(e,a))!==(c=s(o,a))||u(e,o)<0^a>0){do f.point(l===0||l===3?t:r,l>1?i:n);while((l=(l+a+4)%4)!==c)}else f.point(o[0],o[1])}function w(e,s){return t<=e&&e<=r&&n<=s&&s<=i}function E(e,t){w(e,t)&&f.point(e,t)}function A(){v.point=M;p&&p.push(d=[]);L=!0;k=!1;N=C=NaN}function O(){if(h){M(S,x);T&&k&&c.rejoin();h.push(c.buffer())}v.point=E;k&&f.lineEnd()}function M(e,t){e=Math.max(-Dr,Math.min(Dr,e));t=Math.max(-Dr,Math.min(Dr,t));var n=w(e,t);p&&d.push([e,t]);if(L){S=e,x=t,T=n;L=!1;if(n){f.lineStart();f.point(e,t)}}else if(n&&k)f.point(e,t);else{var r=[N,C],i=[e,t];if(a(r,i)){if(!k){f.lineStart();f.point(r[0],r[1])}f.point(i[0],i[1]);n||f.lineEnd()}else if(n){f.lineStart();f.point(e,t)}}N=e,C=t,k=n}var l=f,c=xr(),h,p,d,v={point:E,lineStart:A,lineEnd:O,polygonStart:function(){f=c;h=[];p=[]},polygonEnd:function(){f=l;if((h=e.merge(h)).length){f.polygonStart();br(h,o,m,b,f);f.polygonEnd()}else if(g([t,n])){f.polygonStart(),f.lineStart();b(null,null,1,f);f.lineEnd(),f.polygonEnd()}h=p=d=null}},S,x,T,N,C,k,L;return v}}function Hr(e,t,n){if(Math.abs(t)<xt)return e<=0;var r=e/t;if(t>0){if(r>n[1])return!1;r>n[0]&&(n[0]=r)}else{if(r<n[0])return!1;r<n[1]&&(n[1]=r)}return!0}function Br(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])});return n}function jr(e){var t=0,n=St/3,r=oi(e),i=r(t,n);i.parallels=function(e){return arguments.length?r(t=e[0]*St/180,n=e[1]*St/180):[t/St*180,n/St*180]};return i}function Fr(e,t){function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),s-n*Math.cos(e)]}var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),s=Math.sqrt(i)/r;o.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/r,At((i-(e*e+n*n)*r*r)/(2*r))]};return o}function Ur(){function i(e,t){qr+=r*e-n*t;n=e,r=t}var e,t,n,r;Rr.point=function(s,o){Rr.point=i;e=n=s,t=r=o};Rr.lineEnd=function(){i(e,t)}}function Jr(e,t){e<zr&&(zr=e);e>Xr&&(Xr=e);t<Wr&&(Wr=t);t>Vr&&(Vr=t)}function Kr(){function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r);n.point=s}function s(e,n){t.push("L",e,",",n)}function o(){n.point=r}function u(){t.push("Z")}var e=Qr(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(t){e=Qr(t);return n},result:function(){if(t.length){var e=t.join("");t=[];return e}}};return n}function Qr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Yr(e,t){rr+=e;ir+=t;++sr}function Zr(){function n(n,r){var i=n-e,s=r-t,o=Math.sqrt(i*i+s*s);or+=o*(e+n)/2;ur+=o*(t+r)/2;ar+=o;Yr(e=n,t=r)}var e,t;Gr.point=function(r,i){Gr.point=n;Yr(e=r,t=i)}}function ei(){Gr.point=Yr}function ti(){function i(e,t){var i=e-n,s=t-r,o=Math.sqrt(i*i+s*s);or+=o*(n+e)/2;ur+=o*(r+t)/2;ar+=o;o=r*e-n*t;fr+=o*(n+e);lr+=o*(r+t);cr+=o*3;Yr(n=e,r=t)}var e,t,n,r;Gr.point=function(s,o){Gr.point=i;Yr(e=n=s,t=r=o)};Gr.lineEnd=function(){i(e,t)}}function ni(e){function r(n,r){e.moveTo(n,r);e.arc(n,r,t,0,2*St)}function i(t,r){e.moveTo(t,r);n.point=s}function s(t,n){e.lineTo(t,n)}function o(){n.point=r}function u(){e.closePath()}var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(e){t=e;return n},result:C};return n}function ri(e){function i(t){function y(n,r){n=e(n,r);t.point(n[0],n[1])}function b(){h=NaN;g.point=w;t.lineStart()}function w(n,i){var o=$n([n,i]),u=e(n,i);s(h,p,c,d,v,m,h=u[0],p=u[1],c=n,d=o[0],v=o[1],m=o[2],r,t);t.point(h,p)}function E(){g.point=y;t.lineEnd()}function S(){b();g.point=x;g.lineEnd=T}function x(e,t){w(n=e,i=t),o=h,u=p,a=d,f=v,l=m;g.point=w}function T(){s(h,p,c,d,v,m,o,u,n,a,f,l,r,t);g.lineEnd=E;E()}var n,i,o,u,a,f,l,c,h,p,d,v,m,g={point:y,lineStart:b,lineEnd:E,polygonStart:function(){t.polygonStart();g.lineStart=S},polygonEnd:function(){t.polygonEnd();g.lineStart=b}};return g}function s(r,i,o,u,a,f,l,c,h,p,d,v,m,g){var y=l-r,b=c-i,w=y*y+b*b;if(w>4*t&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=Math.abs(Math.abs(x)-1)<xt?(o+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-r,M=A-i,_=b*O-y*M;if(_*_/w>t||Math.abs((y*O+b*M)/w-.5)>.3||u*p+a*d+f*v<n){s(r,i,o,u,a,f,L,A,C,E/=T,S/=T,x,m,g);g.point(L,A);s(L,A,C,E,S,x,l,c,h,p,d,v,m,g)}}}var t=.5,n=Math.cos(30*Nt),r=16;i.precision=function(e){if(!arguments.length)return Math.sqrt(t);r=(t=e*e)>0&&16;return i};return i}function ii(e){var t=ri(function(t,n){return e([t*Ct,n*Ct])});return function(e){e=t(e);return{point:function(t,n){e.point(t*Nt,n*Nt)},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}}function si(e){return oi(function(){return e})()}function oi(t){function E(e){e=i(e[0]*Nt,e[1]*Nt);return[e[0]*o+d,v-e[1]*o]}function S(e){e=i.invert((e[0]-d)/o,(v-e[1])/o);return e&&[e[0]*Ct,e[1]*Ct]}function x(){i=Br(r=fi(c,h,p),n);var e=n(f,l);d=u-e[0]*o;v=a+e[1]*o;return T()}function T(){if(w){w.valid=!1;w=null}return E}var n,r,i,s=ri(function(e,t){e=n(e,t);return[e[0]*o+d,v-e[1]*o]}),o=150,u=480,a=250,f=0,l=0,c=0,h=0,p=0,d,v,m=Cr,g=fn,y=null,b=null,w;E.stream=function(e){w&&(w.valid=!1);w=ui(r,m(s(g(e))));w.valid=!0;return w};E.clipAngle=function(e){if(!arguments.length)return y;m=e==null?(y=e,Cr):_r((y=+e)*Nt);return T()};E.clipExtent=function(e){if(!arguments.length)return b;b=e;g=e==null?fn:Pr(e[0][0],e[0][1],e[1][0],e[1][1]);return T()};E.scale=function(e){if(!arguments.length)return o;o=+e;return x()};E.translate=function(e){if(!arguments.length)return[u,a];u=+e[0];a=+e[1];return x()};E.center=function(e){if(!arguments.length)return[f*Ct,l*Ct];f=e[0]%360*Nt;l=e[1]%360*Nt;return x()};E.rotate=function(e){if(!arguments.length)return[c*Ct,h*Ct,p*Ct];c=e[0]%360*Nt;h=e[1]%360*Nt;p=e.length>2?e[2]%360*Nt:0;return x()};e.rebind(E,s,"precision");return function(){n=t.apply(this,arguments);E.invert=n.invert&&S;return x()}}function ui(e,t){return{point:function(n,r){r=e(n*Nt,r*Nt),n=r[0];t.point(n>St?n-2*St:n<-St?n+2*St:n,r[1])},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ai(e,t){return[e,t]}function fi(e,t,n){return e?t||n?Br(ci(e),hi(t,n)):ci(e):t||n?hi(t,n):ai}function li(e){return function(t,n){return t+=e,[t>St?t-2*St:t<-St?t+2*St:t,n]}}function ci(e){var t=li(e);t.invert=li(-e);return t}function hi(e,t){function o(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*n+u*r;return[Math.atan2(a*i-l*s,u*n-f*r),At(l*i+a*s)]}var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),s=Math.sin(t);o.invert=function(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*i-a*s;return[Math.atan2(a*i+f*s,u*n+l*r),At(l*n-u*r)]};return o}function pi(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){if(i!=null){i=di(n,i);s=di(n,s);if(o>0?i<s:i>s)i+=o*2*St}else{i=e+o*2*St;s=e}var a;for(var f=o*t,l=i;o>0?l>s:l<s;l-=f)u.point((a=Zn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],a[1])}}function di(e,t){var n=$n(t);n[0]-=e;Yn(n);var r=Lt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-xt)%(2*Math.PI)}function vi(t,n,r){var i=e.range(t,n-xt,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function mi(t,n,r){var i=e.range(t,n-xt,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function gi(e){return e.source}function yi(e){return e.target}function bi(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(_t(r-t)+i*o*_t(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Ct,Math.atan2(o,Math.sqrt(r*r+i*i))*Ct]}:function(){return[e*Ct,t*Ct]};d.distance=h;return d}function Si(){function r(r,i){var s=Math.sin(i*=Nt),o=Math.cos(i),u=Math.abs((r*=Nt)-e),a=Math.cos(u);wi+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=n*s-t*o*a)*u),t*s+n*o*a);e=r,t=s,n=o}var e,t,n;Ei.point=function(i,s){e=i*Nt,t=Math.sin(s*=Nt),n=Math.cos(s);Ei.point=r};Ei.lineEnd=function(){Ei.point=Ei.lineEnd=C}}function xi(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]};return n}function Ci(e,t){function o(e,t){var n=Math.abs(Math.abs(t)-St/2)<xt?0:s/Math.pow(r(t),i);return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var n=Math.cos(e),r=function(e){return Math.tan(St/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),s=n*Math.pow(r(e),i)/i;if(!i)return Ai;o.invert=function(e,t){var n=s-t,r=kt(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(s/r,1/i))-St/2]};return o}function ki(e,t){function s(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(Math.abs(r)<xt)return ai;s.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-kt(r)*Math.sqrt(e*e+n*n)]};return s}function Ai(e,t){return[e,Math.log(Math.tan(St/4+t/2))]}function Oi(e){var t=si(e),n=t.scale,r=t.translate,i=t.clipExtent,s;t.scale=function(){var e=n.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e};t.translate=function(){var e=r.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(s=e==null){var u=St*n(),a=r();i([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else s&&(o=null);return o};return t.clipExtent(null)}function Di(e,t){var n=Math.cos(t)*Math.sin(e);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(t),Math.cos(e))]}function Pi(e){function u(s){function d(){u.push("M",i(e(a),o))}var u=[],a=[],f=-1,l=s.length,c,h=an(t),p=an(n);while(++f<l)if(r.call(this,c=s[f],f))a.push([+h.call(this,c,f),+p.call(this,c,f)]);else if(a.length){d();a=[]}a.length&&d();return u.length?u.join(""):null}var t=Hi,n=Bi,r=yr,i=Fi,s=i.key,o=.7;u.x=function(e){if(!arguments.length)return t;t=e;return u};u.y=function(e){if(!arguments.length)return n;n=e;return u};u.defined=function(e){if(!arguments.length)return r;r=e;return u};u.interpolate=function(e){if(!arguments.length)return s;typeof e=="function"?s=i=e:s=(i=ji.get(e)||Fi).key;return u};u.tension=function(e){if(!arguments.length)return o;o=e;return u};return u}function Hi(e){return e[0]}function Bi(e){return e[1]}function Fi(e){return e.join("L")}function Ii(e){return Fi(e)+"Z"}function qi(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")}function Ri(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ui(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function zi(e,t){return e.length<4?Fi(e):e[1]+Vi(e.slice(1,e.length-1),$i(e,t))}function Wi(e,t){return e.length<3?Fi(e):e[0]+Vi((e.push(e[0]),e),$i([e[e.length-2]].concat(e,[e[1]]),t))}function Xi(e,t){return e.length<3?Fi(e):e[0]+Vi(e,$i(e,t))}function Vi(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Fi(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n){r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1];i=e[1];a=2}if(t.length>1){u=t[1];s=e[a];a++;r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++){s=e[a];u=t[f];r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function $i(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a){i=s;s=o;o=e[u];n.push([r*(o[0]-i[0]),r*(o[1]-i[1])])}return n}function Ji(e){if(e.length<3)return Fi(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",Yi(ts,o),",",Yi(ts,u)];e.push(e[n-1]);while(++t<=n){r=e[t];o.shift();o.push(r[0]);u.shift();u.push(r[1]);ns(a,o,u)}e.pop();a.push("L",r);return a.join("")}function Ki(e){if(e.length<4)return Fi(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3){i=e[n];s.push(i[0]);o.push(i[1])}t.push(Yi(ts,s)+","+Yi(ts,o));--n;while(++n<r){i=e[n];s.shift();s.push(i[0]);o.shift();o.push(i[1]);ns(t,s,o)}return t.join("")}function Qi(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4){s=e[n%r];o.push(s[0]);u.push(s[1])}t=[Yi(ts,o),",",Yi(ts,u)];--n;while(++n<i){s=e[n%r];o.shift();o.push(s[0]);u.shift();u.push(s[1]);ns(t,o,u)}return t.join("")}function Gi(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n){a=e[u];f=u/n;a[0]=t*a[0]+(1-t)*(r+f*s);a[1]=t*a[1]+(1-t)*(i+f*o)}}return Ji(e)}function Yi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ns(e,t,n){e.push("C",Yi(Zi,t),",",Yi(Zi,n),",",Yi(es,t),",",Yi(es,n),",",Yi(ts,t),",",Yi(ts,n))}function rs(e,t){return(t[1]-e[1])/(t[0]-e[0])}function is(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=rs(i,s);while(++t<n)r[t]=(o+(o=rs(i=s,s=e[t+1])))/2;r[t]=o;return r}function ss(e){var t=[],n,r,i,s,o=is(e
),u=-1,a=e.length-1;while(++u<a){n=rs(e[u],e[u+1]);if(Math.abs(n)<1e-6)o[u]=o[u+1]=0;else{r=o[u]/n;i=o[u+1]/n;s=r*r+i*i;if(s>9){s=n*3/Math.sqrt(s);o[u]=s*r;o[u+1]=s*i}}}u=-1;while(++u<=a){s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u]));t.push([s||0,o[u]*s||0])}return t}function os(e){return e.length<3?Fi(e):e[0]+Vi(e,ss(e))}function us(e,t,n,r){var i,s,o,u,a,f,l;i=r[e];s=i[0];o=i[1];i=r[t];u=i[0];a=i[1];i=r[n];f=i[0];l=i[1];return(l-o)*(u-s)-(a-o)*(f-s)>0}function fs(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ls(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function cs(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function ps(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l");r.rightEnd=r.createHalfEdge(null,"l");r.leftEnd.r=r.rightEnd;r.rightEnd.l=r.leftEnd;r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e;t.r=e.r;e.r.l=t;e.r=t},leftBound:function(e){var t=r.leftEnd;do t=t.r;while(t!=r.rightEnd&&i.rightOf(t,e));t=t.l;return t},del:function(e){e.l.r=e.r;e.r.l=e.l;e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return e.edge==null?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return e.edge==null?n.bottomSite:e.edge.region[hs[e.side]]}},i={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},r=t.x-e.x,i=t.y-e.y,s=r>0?r:-r,o=i>0?i:-i;n.c=e.x*r+e.y*i+(r*r+i*i)*.5;if(s>o){n.a=1;n.b=i/r;n.c/=r}else{n.b=1;n.a=r/i;n.c/=i}return n},intersect:function(e,t){var n=e.edge,r=t.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var s=(n.c*r.b-r.c*n.b)/i,o=(r.c*n.a-n.c*r.a)/i,u=n.region.r,a=r.region.r,f,l;if(u.y<a.y||u.y==a.y&&u.x<a.x){f=e;l=n}else{f=t;l=r}var c=s>=l.region.r.x;return c&&f.side==="l"||!c&&f.side==="r"?null:{x:s,y:o}},rightOf:function(e,t){var n=e.edge,r=n.region.r,i=t.x>r.x;if(i&&e.side==="l")return 1;if(!i&&e.side==="r")return 0;if(n.a===1){var s=t.y-r.y,o=t.x-r.x,u=0,a=0;if(!i&&n.b<0||i&&n.b>=0)a=u=s>=n.b*o;else{a=t.x+t.y*n.b>n.c;n.b<0&&(a=!a);a||(u=1)}if(!u){var f=r.x-n.region.l.x;a=n.b*(o*o-s*s)<f*s*(1+2*o/f+n.b*n.b);n.b<0&&(a=!a)}}else{var l=n.c-n.a*t.x,c=t.y-l,h=t.x-r.x,p=l-r.y;a=c*c>h*h+p*p}return e.side==="l"?a:!a},endPoint:function(e,n,r){e.ep[n]=r;if(!e.ep[hs[n]])return;t(e)},distance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},s={list:[],insert:function(e,t,n){e.vertex=t;e.ystar=t.y+n;for(var r=0,i=s.list,o=i.length;r<o;r++){var u=i[r];if(e.ystar>u.ystar||e.ystar==u.ystar&&t.x>u.vertex.x)continue;break}i.splice(r,0,e)},del:function(e){for(var t=0,n=s.list,r=n.length;t<r&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return s.list.length===0},nextEvent:function(e){for(var t=0,n=s.list,r=n.length;t<r;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=s.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return s.list.shift()}};r.init();n.bottomSite=n.list.shift();var o=n.list.shift(),u,a,f,l,c,h,p,d,v,m,g,y,b;for(;;){s.empty()||(u=s.min());if(o&&(s.empty()||o.y<u.y||o.y==u.y&&o.x<u.x)){a=r.leftBound(o);f=r.right(a);p=r.rightRegion(a);y=i.bisect(p,o);h=r.createHalfEdge(y,"l");r.insert(a,h);m=i.intersect(a,h);if(m){s.del(a);s.insert(a,m,i.distance(m,o))}a=h;h=r.createHalfEdge(y,"r");r.insert(a,h);m=i.intersect(h,f);m&&s.insert(h,m,i.distance(m,o));o=n.list.shift()}else{if(!!s.empty())break;a=s.extractMin();l=r.left(a);f=r.right(a);c=r.right(f);p=r.leftRegion(a);d=r.rightRegion(f);g=a.vertex;i.endPoint(a.edge,a.side,g);i.endPoint(f.edge,f.side,g);r.del(a);s.del(f);r.del(f);b="l";if(p.y>d.y){v=p;p=d;d=v;b="r"}y=i.bisect(p,d);h=r.createHalfEdge(y,b);r.insert(l,h);i.endPoint(y,hs[b],g);m=i.intersect(l,h);if(m){s.del(l);s.insert(l,m,i.distance(m,p))}m=i.intersect(h,c);m&&s.insert(h,m,i.distance(m,p))}}for(a=r.right(r.leftEnd);a!=r.rightEnd;a=r.right(a))t(a.edge)}function ds(e){return e.x}function vs(e){return e.y}function ms(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gs(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&gs(e,a[0],n,r,o,u);a[1]&&gs(e,a[1],o,r,i,u);a[2]&&gs(e,a[2],n,u,o,s);a[3]&&gs(e,a[3],o,u,i,s)}}function ys(t,n){t=e.rgb(t);n=e.rgb(n);var r=t.r,i=t.g,s=t.b,o=n.r-r,u=n.g-i,a=n.b-s;return function(e){return"#"+en(Math.round(r+o*e))+en(Math.round(i+u*e))+en(Math.round(s+a*e))}}function bs(e,t){var n={},r={},i;for(i in e)i in t?n[i]=xs(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}}function ws(e,t){t-=e=+e;return function(n){return e+t*n}}function Es(e,t){var n,r,i,s=0,o=0,u=[],a=[],f,l;e+="",t+="";Ss.lastIndex=0;for(r=0;n=Ss.exec(t);++r){n.index&&u.push(t.substring(s,o=n.index));a.push({i:u.length,x:n[0]});u.push(null);s=Ss.lastIndex}s<t.length&&u.push(t.substring(s));for(r=0,f=a.length;(n=Ss.exec(e))&&r<f;++r){l=a[r];if(l.x==n[0]){if(l.i)if(u[l.i+1]==null){u[l.i-1]+=l.x;u.splice(l.i,1);for(i=r+1;i<f;++i)a[i].i--}else{u[l.i-1]+=l.x+u[l.i+1];u.splice(l.i,2);for(i=r+1;i<f;++i)a[i].i-=2}else if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1];u.splice(l.i+1,1);for(i=r+1;i<f;++i)a[i].i--}a.splice(r,1);f--;r--}else l.x=ws(parseFloat(n[0]),parseFloat(l.x))}while(r<f){l=a.pop();if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1];u.splice(l.i+1,1)}f--}return u.length===1?u[0]==null?(l=a[0].x,function(e){return l(e)+""}):function(){return t}:function(e){for(r=0;r<f;++r)u[(l=a[r]).i]=l.x(e);return u.join("")}}function xs(t,n){var r=e.interpolators.length,i;while(--r>=0&&!(i=e.interpolators[r](t,n)));return i}function Ts(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(xs(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}}function Ls(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function As(e){return function(t){return 1-e(1-t)}}function Os(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Ms(e){return e*e}function _s(e){return e*e*e}function Ds(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Ps(e){return function(t){return Math.pow(t,e)}}function Hs(e){return 1-Math.cos(e*St/2)}function Bs(e){return Math.pow(2,10*(e-1))}function js(e){return 1-Math.sqrt(1-e*e)}function Fs(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/(2*St)*Math.asin(1/e):(e=1,n=t/4);return function(r){return 1+e*Math.pow(2,10*-r)*Math.sin((r-n)*2*St/t)}}function Is(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}}function qs(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Rs(t,n){t=e.hcl(t);n=e.hcl(n);var r=t.h,i=t.c,s=t.l,o=n.h-r,u=n.c-i,a=n.l-s;isNaN(u)&&(u=0,i=isNaN(i)?n.c:i);isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360);return function(e){return Bt(r+o*e,i+u*e,s+a*e)+""}}function Us(t,n){t=e.hsl(t);n=e.hsl(n);var r=t.h,i=t.s,s=t.l,o=n.h-r,u=n.s-i,a=n.l-s;isNaN(u)&&(u=0,i=isNaN(i)?n.s:i);isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360);return function(e){return Et(r+o*e,i+u*e,s+a*e)+""}}function zs(t,n){t=e.lab(t);n=e.lab(n);var r=t.l,i=t.a,s=t.b,o=n.l-r,u=n.a-i,a=n.b-s;return function(e){return Wt(r+o*e,i+u*e,s+a*e)+""}}function Ws(e,t){t-=e;return function(n){return Math.round(e+t*n)}}function Xs(e){var t=[e.a,e.b],n=[e.c,e.d],r=$s(t),i=Vs(t,n),s=$s(Js(n,t,-i))||0;if(t[0]*n[1]<n[0]*t[1]){t[0]*=-1;t[1]*=-1;r*=-1;i*=-1}this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ct;this.translate=[e.e,e.f];this.scale=[r,s];this.skew=s?Math.atan2(i,s)*Ct:0}function Vs(e,t){return e[0]*t[0]+e[1]*t[1]}function $s(e){var t=Math.sqrt(Vs(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Js(e,t,n){e[0]+=n*t[0];e[1]+=n*t[1];return e}function Qs(t,n){var r=[],i=[],s,o=e.transform(t),u=e.transform(n),a=o.translate,f=u.translate,l=o.rotate,c=u.rotate,h=o.skew,p=u.skew,d=o.scale,v=u.scale;if(a[0]!=f[0]||a[1]!=f[1]){r.push("translate(",null,",",null,")");i.push({i:1,x:ws(a[0],f[0])},{i:3,x:ws(a[1],f[1])})}else f[0]||f[1]?r.push("translate("+f+")"):r.push("");if(l!=c){l-c>180?c+=360:c-l>180&&(l+=360);i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:ws(l,c)})}else c&&r.push(r.pop()+"rotate("+c+")");h!=p?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:ws(h,p)}):p&&r.push(r.pop()+"skewX("+p+")");if(d[0]!=v[0]||d[1]!=v[1]){s=r.push(r.pop()+"scale(",null,",",null,")");i.push({i:s-4,x:ws(d[0],v[0])},{i:s-2,x:ws(d[1],v[1])})}else(v[0]!=1||v[1]!=1)&&r.push(r.pop()+"scale("+v+")");s=i.length;return function(e){var t=-1,n;while(++t<s)r[(n=i[t]).i]=n.x(e);return r.join("")}}function Gs(e,t){t=t-(e=+e)?1/(t-e):0;return function(n){return(n-e)*t}}function Ys(e,t){t=t-(e=+e)?1/(t-e):0;return function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function Zs(e){var t=e.source,n=e.target,r=to(t,n),i=[t];while(t!==r){t=t.parent;i.push(t)}var s=i.length;while(n!==r){i.splice(s,0,n);n=n.parent}return i}function eo(e){var t=[],n=e.parent;while(n!=null){t.push(e);e=n;n=n.parent}t.push(e);return t}function to(e,t){if(e===t)return e;var n=eo(e),r=eo(t),i=n.pop(),s=r.pop(),o=null;while(i===s){o=i;i=n.pop();s=r.pop()}return o}function no(e){e.fixed|=2}function ro(e){e.fixed&=-7}function io(e){e.fixed|=4;e.px=e.x,e.py=e.y}function so(e){e.fixed&=-5}function oo(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var s=e.nodes,o=s.length,u=-1,a;while(++u<o){a=s[u];if(a==null)continue;oo(a,t,n);e.charge+=a.charge;r+=a.charge*a.cx;i+=a.charge*a.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var f=t*n[e.point.index];e.charge+=e.pointCharge=f;r+=f*e.point.x;i+=f*e.point.y}e.cx=r/e.charge;e.cy=i/e.charge}function fo(t,n){e.rebind(t,n,"sort","children","value");t.nodes=t;t.links=po;return t}function lo(e){return e.children}function co(e){return e.value}function ho(e,t){return t.value-e.value}function po(t){return e.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function mo(e){return e.x}function go(e){return e.y}function yo(e,t,n){e.y0=t;e.y=n}function Eo(t){return e.range(t.length)}function So(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function xo(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)if((i=e[t][1])>r){n=t;r=i}return n}function To(e){return e.reduce(No,0)}function No(e,t){return e+t[1]}function Co(e,t){return ko(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ko(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function Lo(t){return[e.min(t),e.max(t)]}function Ao(e,t){return e.parent==t.parent?1:2}function Oo(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function Mo(e){var t=e.children,n;return t&&(n=t.length)?t[n-1]:e._tree.thread}function _o(e,t){var n=e.children;if(n&&(i=n.length)){var r,i,s=-1;while(++s<i)t(r=_o(n[s],t),e)>0&&(e=r)}return e}function Do(e,t){return e.x-t.x}function Po(e,t){return t.x-e.x}function Ho(e,t){return e.depth-t.depth}function Bo(e,t){function n(e,r){var i=e.children;if(i&&(a=i.length)){var s,o=null,u=-1,a;while(++u<a){s=i[u];n(s,o);o=s}}t(e,r)}n(e,null)}function jo(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0){s=r[i]._tree;s.prelim+=t;s.mod+=t;t+=s.shift+(n+=s.change)}}function Fo(e,t,n){e=e._tree;t=t._tree;var r=n/(t.number-e.number);e.change+=r;t.change-=r;t.shift+=n;t.prelim+=n;t.mod+=n}function Io(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function qo(e,t){return e.value-t.value}function Ro(e,t){var n=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=n;n._pack_prev=t}function Uo(e,t){e._pack_next=t;t._pack_prev=e}function zo(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Wo(e){function p(e){n=Math.min(e.x-e.r,n);r=Math.max(e.x+e.r,r);i=Math.min(e.y-e.r,i);s=Math.max(e.y+e.r,s)}if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,s=-Infinity,o,u,a,f,l,c,h;t.forEach(Xo);o=t[0];o.x=-o.r;o.y=0;p(o);if(h>1){u=t[1];u.x=u.r;u.y=0;p(u);if(h>2){a=t[2];Jo(o,u,a);p(a);Ro(o,a);o._pack_prev=a;Ro(a,u);u=o._pack_next;for(f=3;f<h;f++){Jo(o,u,a=t[f]);var d=0,v=1,m=1;for(l=u._pack_next;l!==u;l=l._pack_next,v++)if(zo(l,a)){d=1;break}if(d==1)for(c=o._pack_prev;c!==l._pack_prev;c=c._pack_prev,m++)if(zo(c,a))break;if(d){v<m||v==m&&u.r<o.r?Uo(o,u=l):Uo(o=c,u);f--}else{Ro(o,a);u=a;p(a)}}}}var g=(n+r)/2,y=(i+s)/2,b=0;for(f=0;f<h;f++){a=t[f];a.x-=g;a.y-=y;b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y))}e.r=b;t.forEach(Vo)}function Xo(e){e._pack_next=e._pack_prev=e}function Vo(e){delete e._pack_next;delete e._pack_prev}function $o(e,t,n,r){var i=e.children;e.x=t+=r*e.x;e.y=n+=r*e.y;e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)$o(i[s],t,n,r)}}function Jo(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o;r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s;n.y=e.y+a*s-f*i}else{n.x=e.x+r;n.y=e.y}}function Ko(t){return 1+e.max(t,function(e){return e.y})}function Qo(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Go(e){var t=e.children;return t&&t.length?Go(t[0]):e}function Yo(e){var t=e.children,n;return t&&(n=t.length)?Yo(t[n-1]):e}function Zo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function eu(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];if(i<0){n+=i/2;i=0}if(s<0){r+=s/2;s=0}return{x:n,y:r,dx:i,dy:s}}function tu(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function nu(e){return e.rangeExtent?e.rangeExtent():tu(e.range())}function ru(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function iu(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;if(s<i){o=n,n=r,r=o;o=i,i=s,s=o}e[n]=t.floor(i);e[r]=t.ceil(s);return e}function su(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ou}function uu(t,n,r,i){var s=[],o=[],u=0,a=Math.min(t.length,n.length)-1;if(t[a]<t[0]){t=t.slice().reverse();n=n.slice().reverse()}while(++u<=a){s.push(r(t[u-1],t[u]));o.push(i(n[u-1],n[u]))}return function(n){var r=e.bisect(t,n,1,a)-1;return o[r](s[r](n))}}function au(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?uu:ru,a=r?Ys:Gs;i=o(e,t,a,n);s=o(t,e,a,xs);return u}function u(e){return i(e)}var i,s;u.invert=function(e){return s(e)};u.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return o()};u.range=function(e){if(!arguments.length)return t;t=e;return o()};u.rangeRound=function(e){return u.range(e).interpolate(Ws)};u.clamp=function(e){if(!arguments.length)return r;r=e;return o()};u.interpolate=function(e){if(!arguments.length)return n;n=e;return o()};u.ticks=function(t){return pu(e,t)};u.tickFormat=function(t,n){return du(e,t,n)};u.nice=function(t){lu(e,t);return o()};u.copy=function(){return au(e,t,n,r)};return o()}function fu(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function lu(e,t){return iu(e,su(t?hu(e,t)[2]:cu(e)))}function cu(e){var t=tu(e),n=t[1]-t[0];return Math.pow(10,Math.round(Math.log(n)/Math.LN10)-1)}function hu(e,t){var n=tu(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2);n[0]=Math.ceil(n[0]/i)*i;n[1]=Math.floor(n[1]/i)*i+i*.5;n[2]=i;return n}function pu(t,n){return e.range.apply(e,hu(t,n))}function du(t,n,r){var i=-Math.floor(Math.log(hu(t,n)[2])/Math.LN10+.01);return e.format(r?r.replace(An,function(e,t,n,r,s,o,u,a,f,l){return[t,n,r,s,o,u,a,f||"."+(i-(l==="%")*2),l].join("")}):",."+i+"f")}function vu(t,n,r,i){function s(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(e){return t(s(e))}u.invert=function(e){return o(t.invert(e))};u.domain=function(e){if(!arguments.length)return i;r=e[0]>=0;t.domain((i=e.map(Number)).map(s));return u};u.base=function(e){if(!arguments.length)return n;n=+e;t.domain(i.map(s));return u};u.nice=function(){var e=iu(i.map(s),r?Math:gu);t.domain(e);i=e.map(o);return u};u.ticks=function(){var e=tu(i),t=[],u=e[0],a=e[1],f=Math.floor(s(u)),l=Math.ceil(s(a)),c=n%1?2:n;if(isFinite(l-f)){if(r){for(;f<l;f++)for(var h=1;h<c;h++)t.push(o(f)*h);t.push(o(f))}else{t.push(o(f));for(;f++<l;)for(var h=c-1;h>0;h--)t.push(o(f)*h)}for(f=0;t[f]<u;f++);for(l=t.length;t[l-1]>a;l--);t=t.slice(f,l)}return t};u.tickFormat=function(t,n){if(!arguments.length)return mu;arguments.length<2?n=mu:typeof n!="function"&&(n=e.format(n));var i=Math.max(.1,t/u.ticks().length),a=r?(f=1e-12,Math.ceil):(f=-1e-12,Math.floor),f;return function(e){return e/o(a(s(e)+f))<=i?n(e):""}};u.copy=function(){return vu(t.copy(),n,r,i)};return fu(u,t)}function yu(e,t,n){function s(t){return e(r(t))}var r=bu(t),i=bu(1/t);s.invert=function(t){return i(e.invert(t))};s.domain=function(t){if(!arguments.length)return n;e.domain((n=t.map(Number)).map(r));return s};s.ticks=function(e){return pu(n,e)};s.tickFormat=function(e,t){return du(n,e,t)};s.nice=function(e){return s.domain(lu(n,e))};s.exponent=function(o){if(!arguments.length)return t;r=bu(t=o);i=bu(1/t);e.domain(n.map(r));return s};s.copy=function(){return yu(e.copy(),t,n)};return fu(s,e)}function bu(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wu(t,n){function o(e){return i[((r.get(e)||r.set(e,t.push(e)))-1)%i.length]}function u(n,r){return e.range(t.length).map(function(e){return n+r*e})}var r,i,s;o.domain=function(e){if(!arguments.length)return t;t=[];r=new v;var i=-1,s=e.length,u;while(++i<s)r.has(u=e[i])||r.set(u,t.push(u));return o[n.t].apply(o,n.a)};o.range=function(e){if(!arguments.length)return i;i=e;s=0;n={t:"range",a:arguments};return o};o.rangePoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],f=e[1],l=(f-a)/(Math.max(1,t.length-1)+r);i=u(t.length<2?(a+f)/2:a+l*r/2,l);s=0;n={t:"rangePoints",a:arguments};return o};o.rangeBands=function(e,r,a){arguments.length<2&&(r=0);arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=(c-l)/(t.length-r+2*a);i=u(l+h*a,h);f&&i.reverse();s=h*(1-r);n={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(e,r,a){arguments.length<2&&(r=0);arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=Math.floor((c-l)/(t.length-r+2*a)),p=c-l-(t.length-r)*h;i=u(l+Math.round(p/2),h);f&&i.reverse();s=Math.round(h*(1-r));n={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return s};o.rangeExtent=function(){return tu(n.a[0])};o.copy=function(){return wu(t,n)};return o.domain(t)}function Nu(t,n){function i(){var i=0,o=n.length;r=[];while(++i<o)r[i-1]=e.quantile(t,i/o);return s}function s(t){if(!isNaN(t=+t))return n[e.bisect(r,t)]}var r;s.domain=function(n){if(!arguments.length)return t;t=n.filter(function(e){return!isNaN(e)}).sort(e.ascending);return i()};s.range=function(e){if(!arguments.length)return n;n=e;return i()};s.quantiles=function(){return r};s.invertExtent=function(e){e=n.indexOf(e);return e<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]};s.copy=function(){return Nu(t,n)};return i()}function Cu(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){r=n.length/(t-e);i=n.length-1;return s}var r,i;s.domain=function(n){if(!arguments.length)return[e,t];e=+n[0];t=+n[n.length-1];return o()};s.range=function(e){if(!arguments.length)return n;n=e;return o()};s.invertExtent=function(t){t=n.indexOf(t);t=t<0?NaN:t/r+e;return[t,t+1/r]};s.copy=function(){return Cu(e,t,n)};return o()}function ku(t,n){function r(r){if(r<=r)return n[e.bisect(t,r)]}r.domain=function(e){if(!arguments.length)return t;t=e;return r};r.range=function(e){if(!arguments.length)return n;n=e;return r};r.invertExtent=function(e){e=n.indexOf(e);return[t[e-1],t[e]]};r.copy=function(){return ku(t,n)};return r}function Lu(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(n){if(!arguments.length)return e;e=n.map(t);return t};t.ticks=function(t){return pu(e,t)};t.tickFormat=function(t,n){return du(e,t,n)};t.copy=function(){return Lu(e)};return t}function Mu(e){return e.innerRadius}function _u(e){return e.outerRadius}function Du(e){return e.startAngle}function Pu(e){return e.endAngle}function Hu(e){var t,n=-1,r=e.length,i,s;while(++n<r){t=e[n];i=t[0];s=t[1]+Au;t[0]=i*Math.cos(s);t[1]=i*Math.sin(s)}return e}function Bu(e){function c(u){function x(){c.push("M",o(e(p),l),f,a(e(h.reverse()),l),"Z")}var c=[],h=[],p=[],d=-1,v=u.length,m,g=an(t),y=an(r),b=t===n?function(){return E}:an(n),w=r===i?function(){return S}:an(i),E,S;while(++d<v)if(s.call(this,m=u[d],d)){h.push([E=+g.call(this,m,d),S=+y.call(this,m,d)]);p.push([+b.call(this,m,d),+w.call(this,m,d)])}else if(h.length){x();h=[];p=[]}h.length&&x();return c.length?c.join(""):null}var t=Hi,n=Hi,r=0,i=Bi,s=yr,o=Fi,u=o.key,a=o,f="L",l=.7;c.x=function(e){if(!arguments.length)return n;t=n=e;return c};c.x0=function(e){if(!arguments.length)return t;t=e;return c};c.x1=function(e){if(!arguments.length)return n;n=e;return c};c.y=function(e){if(!arguments.length)return i;r=i=e;return c};c.y0=function(e){if(!arguments.length)return r;r=e;return c};c.y1=function(e){if(!arguments.length)return i;i=e;return c};c.defined=function(e){if(!arguments.length)return s;s=e;return c};c.interpolate=function(e){if(!arguments.length)return u;typeof e=="function"?u=o=e:u=(o=ji.get(e)||Fi).key;a=o.reverse||o;f=o.closed?"M":"L";return c};c.tension=function(e){if(!arguments.length)return l;l=e;return c};return c}function ju(e){return e.radius}function Fu(e){return[e.x,e.y]}function Iu(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+Au;return[n*Math.cos(r),n*Math.sin(r)]}}function qu(){return 64}function Ru(){return"circle"}function Uu(e){var t=Math.sqrt(e/St);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Vu(e,t){D(e,$u);e.id=t;return e}function Gu(e,t,n,r){var i=e.id;return et(e,typeof n=="function"?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Yu(e){e==null&&(e="");return function(){this.textContent=e}}function Zu(t,n,r,i){var s=t.__transition__||(t.__transition__={active:0,count:0}),o=s[r];if(!o){var u=i.time;o=s[r]={tween:new v,time:u,ease:i.ease,delay:i.delay,duration:i.duration};++s.count;e.timer(function(e){function h(e){if(s.active>r)return d();s.active=r;o.event&&o.event.start.call(t,i,n);o.tween.forEach(function(e,r){(r=r.call(t,i,n))&&c.push(r)});if(p(e))return 1;wn(p,0,u)}function p(e){if(s.active!==r)return d();var u=(e-f)/l,h=a(u),p=c.length;while(p>0)c[--p].call(t,h);if(u>=1){d();o.event&&o.event.end.call(t,i,n);return 1}}function d(){--s.count?delete s[r]:delete t.__transition__;return 1}var i=t.__data__,a=o.ease,f=o.delay,l=o.duration,c=[];if(f<=e)return h(e);wn(h,f,u)},0,u)}}function na(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function ra(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function ia(e,t,n){i=[];if(n&&t.length>1){var r=tu(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function fa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ya(e,t,n){function r(t){var n=e(t),r=s(n,1);return t-n<r-t?n:r}function i(n){t(n=e(new ua(n-1)),1);return n}function s(e,n){t(e=new ua(+e),n);return e}function o(e,r,s){var o=i(e),u=[];if(s>1)while(o<r){n(o)%s||u.push(new Date(+o));t(o,1)}else while(o<r)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{ua=fa;var r=new fa;r._=e;return o(r,t,n)}finally{ua=Date}}e.floor=e;e.round=r;e.ceil=i;e.offset=s;e.range=o;var a=e.utc=ba(e);a.floor=a;a.round=ba(r);a.ceil=ba(i);a.offset=ba(s);a.range=u;return e}function ba(e){return function(t,n){try{ua=fa;var r=new fa;r._=t;return e(r,n)._}finally{ua=Date}}}function wa(e,t,n,r){var i,s,o=0,u=t.length,a=n.length;while(o<u){if(r>=a)return-1;i=t.charCodeAt(o++);if(i===37){s=Ha[t.charAt(o++)];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function Ea(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function Sa(e){var t=new v,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function xa(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function Ba(e,t,n){Ca.lastIndex=0;var r=Ca.exec(t.substring(n));return r?(e.w=ka.get(r[0].toLowerCase()),n+r[0].length):-1}function ja(e,t,n){Ta.lastIndex=0;var r=Ta.exec(t.substring(n));return r?(e.w=Na.get(r[0].toLowerCase()),n+r[0].length):-1}function Fa(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ia(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function qa(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function Ra(e,t,n){Oa.lastIndex=0;var r=Oa.exec(t.substring(n));return r?(e.m=Ma.get(r[0].toLowerCase()),n+r[0].length):-1}function Ua(e,t,n){La.lastIndex=0;var r=La.exec(t.substring(n));return r?(e.m=Aa.get(r[0].toLowerCase()),n+r[0].length):-1}function za(e,t,n){return wa(e,Pa.c.toString(),t,n)}function Wa(e,t,n){return wa(e,Pa.x.toString(),t,n)}function Xa(e,t,n){return wa(e,Pa.X.toString(),t,n)}function Va(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function $a(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.y=Ja(+r[0]),n+r[0].length):-1}function Ja(e){return e+(e>68?1900:2e3)}function Ka(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Qa(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ga(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Ya(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Za(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ef(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function tf(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function rf(e,t,n){var r=sf.get(t.substring(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}function of(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(Math.abs(t)/60),i=Math.abs(t)%60;return n+xa(r,"0",2)+xa(i,"0",2)}function uf(e,t,n){_a.lastIndex=0;var r=_a.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function ff(e){return e.toISOString()}function lf(t,n,r){function i(e){return t(e)}i.invert=function(e){return cf(t.invert(e))};i.domain=function(e){if(!arguments.length)return t.domain().map(cf);t.domain(e);return i};i.nice=function(e){return i.domain(iu(i.domain(),e))};i.ticks=function(r,s){var o=tu(i.domain());if(typeof r!="function"){var u=o[1]-o[0],a=u/r,f=e.bisect(vf,a);if(f==vf.length)return n.year(o,r);if(!f)return t.ticks(r).map(cf);a/vf[f-1]<vf[f]/a&&--f;r=n[f];s=r[1];r=r[0].range}return r(o[0],new Date(+o[1]+1),s)};i.tickFormat=function(){return r};i.copy=function(){return lf(t.copy(),n,r)};return fu(i,t)}function cf(e){return new Date(e)}function hf(e){return function(t){var n=e.length-1,r=e[n];while(!r[1](t))r=e[--n];return r[0](t)}}function pf(e){var t=new Date(e,0,1);t.setFullYear(e);return t}function df(e){var t=e.getFullYear(),n=pf(t),r=pf(t+1);return t+(e-n)/(r-n)}function xf(e){var t=new Date(Date.UTC(e,0,1));t.setUTCFullYear(e);return t}function Tf(e){var t=e.getUTCFullYear(),n=xf(t),r=xf(t+1);return t+(e-n)/(r-n)}function Nf(e){return JSON.parse(e.responseText)}function Cf(e){var n=t.createRange();n.selectNode(t.body);return n.createContextualFragment(e.responseText)}var e={version:"3.2.8"};Date.now||(Date.now=function(){return+(new Date)});var t=document,n=t.documentElement,r=window;try{t.createElement("div").style.setProperty("opacity",0,"")}catch(i){var s=r.Element.prototype,o=s.setAttribute,u=s.setAttributeNS,a=r.CSSStyleDeclaration.prototype,f=a.setProperty;s.setAttribute=function(e,t){o.call(this,e,t+"")};s.setAttributeNS=function(e,t,n){u.call(this,e,t,n+"")};a.setProperty=function(e,t,n){f.call(this,e,t+"",n)}}e.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};e.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i};e.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i};e.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r&&!((i=o=e[n])!=null&&i<=i))i=o=undefined;while(++n<r)if((s=e[n])!=null){i>s&&(i=s);o<s&&(o=s)}}else{while(++n<r&&!((i=o=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)if((s=t.call(e,e[n],n))!=null){i>s&&(i=s);o<s&&(o=s)}}return[i,o]};e.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)isNaN(i=+e[s])||(n+=i);else while(++s<r)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n};e.mean=function(e,t){var n=e.length,r,i=0,s=-1,o=0;if(arguments.length===1)while(++s<n)l(r=e[s])&&(i+=(r-i)/++o);else while(++s<n)l(r=t.call(e,e[s],s))&&(i+=(r-i)/++o);return o?i:undefined};e.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i};e.median=function(t,n){arguments.length>1&&(t=t.map(n));t=t.filter(l);return t.length?e.quantile(t.sort(e.ascending),.5):undefined};e.bisector=function(e){return{left:function(t,n,r,i){arguments.length<3&&(r=0);arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e.call(t,t[s],s)<n?r=s+1:i=s}return r},right:function(t,n,r,i){arguments.length<3&&(r=0);arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;n<e.call(t,t[s],s)?i=s:r=s+1}return r}}};var c=e.bisector(function(e){return e});e.bisectLeft=c.left;e.bisect=e.bisectRight=c.right;e.shuffle=function(e){var t=e.length,n,r;while(t){r=Math.random()*t--|0;n=e[t],e[t]=e[r],e[r]=n}return e};e.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r};e.zip=function(){if(!(s=arguments.length))return[];for(var t=-1,n=e.min(arguments,h),r=new Array(n);++t<n;)for(var i=-1,s,o=r[t]=new Array(s);++i<s;)o[i]=arguments[i][t];return r};e.transpose=function(t){return e.zip.apply(e,t)};e.keys=function(e){var t=[];for(var n in e)t.push(n);return t};e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t};e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};e.merge=function(e){return Array.prototype.concat.apply([],e)};e.range=function(e,t,n){if(arguments.length<3){n=1;if(arguments.length<2){t=e;e=0}}if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=p(Math.abs(n)),s=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++s)>t)r.push(o/i);else while((o=e+n*++s)<t)r.push(o/i);return r};e.map=function(e){var t=new v;if(e instanceof v)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t};d(v,{has:function(e){return m+e in this},get:function(e){return this[m+e]},set:function(e,t){return this[m+e]=t},remove:function(e){e=m+e;return e in this&&delete this[e]},keys:function(){var e=[];this.forEach(function(t){e.push(t)});return e},values:function(){var e=[];this.forEach(function(t,n){e.push(n)});return e},entries:function(){var e=[];this.forEach(function(t,n){e.push({key:t,value:n})});return e},forEach:function(e){for(var t in this)t.charCodeAt(0)===g&&e.call(this,t.substring(1),this[t])}});var m="\0",g=m.charCodeAt(0);e.nest=function(){function o(e,r,u){if(u>=n.length)return s?s.call(t,r):i?r.sort(i):r;var a=-1,f=r.length,l=n[u++],c,h,p,d=new v,m;while(++a<f)(m=d.get(c=l(h=r[a])))?m.push(h):d.set(c,[h]);if(e){h=e();p=function(t,n){h.set(t,o(e,n,u))}}else{h={};p=function(t,n){h[t]=o(e,n,u)}}d.forEach(p);return h}function u(e,t){if(t>=n.length)return e;var i=[],s=r[t++];e.forEach(function(e,n){i.push({key:e,values:u(n,t)})});return s?i.sort(function(e,t){return s(e.key,t.key)}):i}var t={},n=[],r=[],i,s;t.map=
function(e,t){return o(t,e,0)};t.entries=function(t){return u(o(e.map,t,0),0)};t.key=function(e){n.push(e);return t};t.sortKeys=function(e){r[n.length-1]=e;return t};t.sortValues=function(e){i=e;return t};t.rollup=function(e){s=e;return t};return t};e.set=function(e){var t=new y;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t};d(y,{has:function(e){return m+e in this},add:function(e){this[m+e]=!0;return e},remove:function(e){e=m+e;return e in this&&delete this[e]},values:function(){var e=[];this.forEach(function(t){e.push(t)});return e},forEach:function(e){for(var t in this)t.charCodeAt(0)===g&&e.call(this,t.substring(1))}});e.behavior={};e.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=b(e,t,t[i]);return e};var E=["webkit","ms","moz","Moz","o","O"],S=T;try{S(n.childNodes)[0].nodeType}catch(N){S=x}e.dispatch=function(){var e=new k,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=L(e);return e};k.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0){r=e.substring(n+1);e=e.substring(0,n)}if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}};e.event=null;e.requote=function(e){return e.replace(_,"\\$&")};var _=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,D={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},H=function(e,t){return t.querySelector(e)},B=function(e,t){return t.querySelectorAll(e)},j=n[w(n,"matchesSelector")],F=function(e,t){return j.call(e,t)};if(typeof Sizzle=="function"){H=function(e,t){return Sizzle(e,t)[0]||null};B=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))};F=Sizzle.matchesSelector}e.selection=function(){return it};var I=e.selection.prototype=[];I.select=function(e){var t=[],n,r,i,s;e=q(e);for(var o=-1,u=this.length;++o<u;){t.push(n=[]);n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)if(s=i[a]){n.push(r=e.call(s,s.__data__,a,o));r&&"__data__"in s&&(r.__data__=s.__data__)}else n.push(null)}return P(t)};I.selectAll=function(e){var t=[],n,r;e=R(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)if(r=o[u]){t.push(n=S(e.call(r,r.__data__,u,i)));n.parentNode=r}return P(t)};var U={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:U,qualify:function(e){var t=e.indexOf(":"),n=e;if(t>=0){n=e.substring(0,t);e=e.substring(t+1)}return U.hasOwnProperty(n)?{space:U[n],local:e}:e}};I.attr=function(t,n){if(arguments.length<2){if(typeof t=="string"){var r=this.node();t=e.ns.qualify(t);return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))};I.classed=function(e,t){if(arguments.length<2){if(typeof e=="string"){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return!1}else{t=n.getAttribute("class");while(++i<r)if(!X(e[i]).test(t))return!1}return!0}for(t in e)this.each(V(t,e[t]));return this}return this.each(V(e,t))};I.style=function(e,t,n){var i=arguments.length;if(i<3){if(typeof e!="string"){i<2&&(t="");for(n in e)this.each(J(n,e[n],t));return this}if(i<2)return r.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(J(e,t,n))};I.property=function(e,t){if(arguments.length<2){if(typeof e=="string")return this.node()[e];for(t in e)this.each(K(t,e[t]));return this}return this.each(K(e,t))};I.text=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};I.html=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};I.append=function(e){e=Q(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};I.insert=function(e,t){e=Q(e);t=q(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments))})};I.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})};I.data=function(e,t){function o(e,n){var r,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(s),c=new Array(s),h=new Array(i),p,d;if(t){var m=new v,g=new v,y=[],b;for(r=-1;++r<i;){b=t.call(p=e[r],p.__data__,r);m.has(b)?h[r]=p:m.set(b,p);y.push(b)}for(r=-1;++r<s;){b=t.call(n,d=n[r],r);if(p=m.get(b)){l[r]=p;p.__data__=d}else g.has(b)||(c[r]=G(d));g.set(b,d);m.remove(b)}for(r=-1;++r<i;)m.has(y[r])&&(h[r]=e[r])}else{for(r=-1;++r<o;){p=e[r];d=n[r];if(p){p.__data__=d;l[r]=p}else c[r]=G(d)}for(;r<s;++r)c[r]=G(n[r]);for(;r<i;++r)h[r]=e[r]}c.update=l;c.parentNode=l.parentNode=h.parentNode=e.parentNode;u.push(c);a.push(l);f.push(h)}var n=-1,r=this.length,i,s;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r)if(s=i[n])e[n]=s.__data__;return e}var u=tt([]),a=P([]),f=P([]);if(typeof e=="function")while(++n<r)o(i=this[n],e.call(i,i.parentNode.__data__,n));else while(++n<r)o(i=this[n],e);a.enter=function(){return u};a.exit=function(){return f};return a};I.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};I.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=Y(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]);n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return P(t)};I.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r]){i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i);i=s}return this};I.sort=function(e){e=Z.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()};I.each=function(e){return et(this,function(t,n,r){e.call(t,t.__data__,n,r)})};I.call=function(e){var t=S(arguments);e.apply(t[0]=this,t);return this};I.empty=function(){return!this.node()};I.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var s=n[r];if(s)return s}return null};I.size=function(){var e=0;this.each(function(){++e});return e};var nt=[];e.selection.enter=tt;e.selection.enter.prototype=nt;nt.append=I.append;nt.empty=I.empty;nt.node=I.node;nt.call=I.call;nt.size=I.size;nt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update;t.push(n=[]);n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)if(o=s[f]){n.push(i[f]=r=e.call(s.parentNode,o.__data__,f,u));r.__data__=o.__data__}else n.push(null)}return P(t)};nt.insert=function(e,t){arguments.length<2&&(t=rt(this));return I.insert.call(this,e,t)};I.transition=function(){var e=Ku||++Ju,t=[],n,r,i=Qu||{time:Date.now(),ease:Ds,delay:0,duration:250};for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;){(r=u[a])&&Zu(r,a,e,i);n.push(r)}}return Vu(t,e)};e.select=function(e){var r=[typeof e=="string"?H(e,t):e];r.parentNode=n;return P([r])};e.selectAll=function(e){var r=S(typeof e=="string"?B(e,t):e);r.parentNode=n;return P([r])};var it=e.select(n);I.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t=!1);for(n in e)this.each(st(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(st(e,t,n))};var ot=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});ot.forEach(function(e){"on"+e in t&&ot.remove(e)});var ft=w(n.style,"userSelect"),lt=0;e.mouse=function(e){return pt(e,O())};var ht=/WebKit/.test(r.navigator.userAgent)?-1:0;e.touches=function(e,t){arguments.length<2&&(t=O().touches);return t?S(t).map(function(t){var n=pt(e,t);n.identifier=t.identifier;return n}):[]};e.behavior.drag=function(){function o(){this.on("mousedown.drag",i).on("touchstart.drag",s)}function u(){return e.event.changedTouches[0].identifier}function a(t,n){return e.touches(t).filter(function(e){return e.identifier===n})[0]}function f(i,s,o,u){return function(){function b(){if(!f)return w();var e=s(f,h),t=e[0]-d[0],n=e[1]-d[1];v|=t|n;d=e;l({type:"drag",x:e[0]+m[0],y:e[1]+m[1],dx:t,dy:n})}function w(){g.on(o+"."+p,null).on(u+"."+p,null);y(v&&e.event.target===c);l({type:"dragend"})}var a=this,f=a.parentNode,l=t.of(a,arguments),c=e.event.target,h=i(),p=h==null?"drag":"drag-"+h,d=s(f,h),v=0,m,g=e.select(r).on(o+"."+p,b).on(u+"."+p,w),y=ct();if(n){m=n.apply(a,arguments);m=[m.x-d[0],m.y-d[1]]}else m=[0,0];l({type:"dragstart"})}}var t=M(o,"drag","dragstart","dragend"),n=null,i=f(C,e.mouse,"mousemove","mouseup"),s=f(u,a,"touchmove","touchend");o.origin=function(e){if(!arguments.length)return n;n=e;return o};return e.rebind(o,t,"on")};e.behavior.zoom=function(){function y(){this.on(o,N).on(mt+".zoom",k).on(u,L).on("dblclick.zoom",O).on(f,C)}function b(e){return[(e[0]-t[0])/i,(e[1]-t[1])/i]}function w(e){return[e[0]*i+t[0],e[1]*i+t[1]]}function E(e){i=Math.max(s[0],Math.min(s[1],e))}function S(e,n){n=w(n);t[0]+=e[0]-n[0];t[1]+=e[1]-n[1]}function x(){v&&v.domain(d.range().map(function(e){return(e-t[0])/i}).map(d.invert));g&&g.domain(m.range().map(function(e){return(e-t[1])/i}).map(m.invert))}function T(e){x();e({type:"zoom",scale:i,translate:t})}function N(){function c(){s=1;S(e.mouse(t),f);T(n)}function h(){o.on(u,r===t?L:null).on(a,null);l(s&&e.event.target===i)}var t=this,n=p.of(t,arguments),i=e.event.target,s=0,o=e.select(r).on(u,c).on(a,h),f=b(e.mouse(t)),l=ct()}function C(){function g(){var n=e.touches(t);a=i;s={};n.forEach(function(e){s[e.identifier]=b(e)});return n}function y(){var e=Date.now(),t=g();if(t.length===1){if(e-h<500){var r=t[0],o=s[r.identifier];E(i*2);S(r,o);A();T(n)}h=e}else if(t.length>1){var r=t[0],a=t[1],f=r[0]-a[0],l=r[1]-a[1];u=f*f+l*l}}function w(){var r=e.touches(t),i=r[0],o=s[i.identifier];if(f=r[1]){var f,l=s[f.identifier],c=e.event.scale;if(c==null){var p=(p=f[0]-i[0])*p+(p=f[1]-i[1])*p;c=u&&Math.sqrt(p/u)}i=[(i[0]+f[0])/2,(i[1]+f[1])/2];o=[(o[0]+l[0])/2,(o[1]+l[1])/2];E(c*a)}h=null;S(i,o);T(n)}function x(){if(e.event.touches.length)g();else{d.on(l,null).on(c,null);v.on(o,N).on(f,C);m()}}var t=this,n=p.of(t,arguments),s,u=0,a,d=e.select(r).on(l,w).on(c,x),v=e.select(t).on(o,null).on(f,y),m=ct();y()}function k(){A();n||(n=b(e.mouse(this)));E(Math.pow(2,vt()*.002)*i);S(e.mouse(this),n);T(p.of(this,arguments))}function L(){n=null}function O(){var t=e.mouse(this),n=b(t),r=Math.log(i)/Math.LN2;E(Math.pow(2,e.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1));S(t,n);T(p.of(this,arguments))}var t=[0,0],n,i=1,s=dt,o="mousedown.zoom",u="mousemove.zoom",a="mouseup.zoom",f="touchstart.zoom",l="touchmove.zoom",c="touchend.zoom",h,p=M(y,"zoom"),d,v,m,g;y.translate=function(e){if(!arguments.length)return t;t=e.map(Number);x();return y};y.scale=function(e){if(!arguments.length)return i;i=+e;x();return y};y.scaleExtent=function(e){if(!arguments.length)return s;s=e==null?dt:e.map(Number);return y};y.x=function(e){if(!arguments.length)return v;v=e;d=e.copy();t=[0,0];i=1;return y};y.y=function(e){if(!arguments.length)return g;g=e;m=e.copy();t=[0,0];i=1;return y};return e.rebind(y,p,"on")};var dt=[0,Infinity],vt,mt="onwheel"in t?(vt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in t?(vt=function(){return e.event.wheelDelta},"mousewheel"):(vt=function(){return-e.event.detail},"MozMousePixelScroll");gt.prototype.toString=function(){return this.rgb()+""};e.hsl=function(e,t,n){return arguments.length===1?e instanceof bt?yt(e.h,e.s,e.l):tn(""+e,nn,yt):yt(+e,+t,+n)};var wt=bt.prototype=new gt;wt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return yt(this.h,this.s,this.l/e)};wt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return yt(this.h,this.s,e*this.l)};wt.rgb=function(){return Et(this.h,this.s,this.l)};var St=Math.PI,xt=1e-6,Tt=xt*xt,Nt=St/180,Ct=180/St;e.hcl=function(t,n,r){return arguments.length===1?t instanceof Pt?Dt(t.h,t.c,t.l):t instanceof Ft?Xt(t.l,t.a,t.b):Xt((t=rn((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):Dt(+t,+n,+r)};var Ht=Pt.prototype=new gt;Ht.brighter=function(e){return Dt(this.h,this.c,Math.min(100,this.l+It*(arguments.length?e:1)))};Ht.darker=function(e){return Dt(this.h,this.c,Math.max(0,this.l-It*(arguments.length?e:1)))};Ht.rgb=function(){return Bt(this.h,this.c,this.l).rgb()};e.lab=function(t,n,r){return arguments.length===1?t instanceof Ft?jt(t.l,t.a,t.b):t instanceof Pt?Bt(t.l,t.c,t.h):rn((t=e.rgb(t)).r,t.g,t.b):jt(+t,+n,+r)};var It=18,qt=.95047,Rt=1,Ut=1.08883,zt=Ft.prototype=new gt;zt.brighter=function(e){return jt(Math.min(100,this.l+It*(arguments.length?e:1)),this.a,this.b)};zt.darker=function(e){return jt(Math.max(0,this.l-It*(arguments.length?e:1)),this.a,this.b)};zt.rgb=function(){return Wt(this.l,this.a,this.b)};e.rgb=function(e,t,n){return arguments.length===1?e instanceof Yt?Gt(e.r,e.g,e.b):tn(""+e,Gt,Et):Gt(~~e,~~t,~~n)};var Zt=Yt.prototype=new gt;Zt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;if(!t&&!n&&!r)return Gt(i,i,i);t&&t<i&&(t=i);n&&n<i&&(n=i);r&&r<i&&(r=i);return Gt(Math.min(255,~~(t/e)),Math.min(255,~~(n/e)),Math.min(255,~~(r/e)))};Zt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return Gt(~~(e*this.r),~~(e*this.g),~~(e*this.b))};Zt.hsl=function(){return nn(this.r,this.g,this.b)};Zt.toString=function(){return"#"+en(this.r)+en(this.g)+en(this.b)};var un=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});un.forEach(function(e,t){un.set(e,Kt(t))});e.functor=an;e.xhr=ln(fn);e.dsv=function(t,n){function s(t,r,i){arguments.length<3&&(i=r,r=null);var s=e.xhr(t,n,i);s.row=function(e){return arguments.length?s.response((r=e)==null?o:u(e)):r};return s.row(r)}function o(e){return s.parse(e.responseText)}function u(e){return function(t){return s.parse(t.responseText,e)}}function a(e){return e.map(f).join(t)}function f(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var r=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);s.parse=function(e,t){var n;return s.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})};s.parseRows=function(e,t){function c(){if(u>=o)return r;if(l)return l=!1,n;var t=u;if(e.charCodeAt(t)===34){var s=t;while(s++<o)if(e.charCodeAt(s)===34){if(e.charCodeAt(s+1)!==34)break;++s}u=s+2;var a=e.charCodeAt(s+1);if(a===13){l=!0;e.charCodeAt(s+2)===10&&++u}else a===10&&(l=!0);return e.substring(t+1,s).replace(/""/g,'"')}while(u<o){var a=e.charCodeAt(u++),f=1;if(a===10)l=!0;else if(a===13){l=!0;e.charCodeAt(u)===10&&(++u,++f)}else if(a!==i)continue;return e.substring(t,u-f)}return e.substring(t)}var n={},r={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==r){var h=[];while(f!==n&&f!==r){h.push(f);f=c()}if(t&&!(h=t(h,a++)))continue;s.push(h)}return s};s.format=function(e){if(Array.isArray(e[0]))return s.formatRows(e);var n=new y,r=[];e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))});return[r.map(f).join(t)].concat(e.map(function(e){return r.map(function(t){return f(e[t])}).join(t)})).join("\n")};s.formatRows=function(e){return e.map(a).join("\n")};return s};e.csv=e.dsv(",","text/csv");e.tsv=e.dsv("	","text/tab-separated-values");var pn,dn,vn,mn,gn,yn=r[w(r,"requestAnimationFrame")]||function(e){setTimeout(e,17)};e.timer=function(e,t,n){var r=arguments.length;r<2&&(t=0);r<3&&(n=Date.now());var i=n+t,s={callback:e,time:i,next:null};dn?dn.next=s:pn=s;dn=s;if(!vn){mn=clearTimeout(mn);vn=1;yn(bn)}};e.timer.flush=function(){En();Sn()};var xn=".",Tn=",",Nn=[3,3],Cn="$",kn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ln);e.formatPrefix=function(t,n){var r=0;if(t){t<0&&(t*=-1);n&&(t=e.round(t,Mn(t,n)));r=1+Math.floor(1e-12+Math.log(t)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r<=0?r+1:r-1)/3)*3))}return kn[8+r/3]};e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};e.format=function(t){var n=An.exec(t),r=n[1]||" ",i=n[2]||">",s=n[3]||"",o=n[4]||"",u=n[5],a=+n[6],f=n[7],l=n[8],c=n[9],h=1,p="",d=!1;l&&(l=+l.substring(1));if(u||r==="0"&&i==="="){u=r="0";i="=";f&&(a-=Math.floor((a-1)/4))}switch(c){case"n":f=!0;c="g";break;case"%":h=100;p="%";c="f";break;case"p":h=100;p="%";c="r";break;case"b":case"o":case"x":case"X":o==="#"&&(o="0"+c.toLowerCase());case"c":case"d":d=!0;l=0;break;case"s":h=-1;c="r"}o==="#"?o="":o==="$"&&(o=Cn);c=="r"&&!l&&(c="g");if(l!=null)if(c=="g")l=Math.max(1,Math.min(21,l));else if(c=="e"||c=="f")l=Math.max(0,Math.min(20,l));c=On.get(c)||_n;var v=u&&f;return function(t){if(d&&t%1)return"";var n=t<0||t===0&&1/t<0?(t=-t,"-"):s;if(h<0){var m=e.formatPrefix(t,l);t=m.scale(t);p=m.symbol}else t*=h;t=c(t,l);var g=t.lastIndexOf("."),y=g<0?t:t.substring(0,g),b=g<0?"":xn+t.substring(g+1);!u&&f&&(y=Dn(y));var w=o.length+y.length+b.length+(v?0:n.length),E=w<a?(new Array(w=a-w+1)).join(r):"";v&&(y=Dn(E+y));n+=o;t=y+b;return(i==="<"?n+t+E:i===">"?E+n+t:i==="^"?E.substring(0,w>>=1)+n+t+E.substring(w):n+(v?t:E+t))+p}};var An=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,On=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,n){return(t=e.round(t,Mn(t,n))).toFixed(Math.max(0,Math.min(20,Mn(t*(1+1e-15),n))))}}),Dn=fn;if(Nn){var Pn=Nn.length;Dn=function(e){var t=e.length,n=[],r=0,i=Nn[0];while(t>0&&i>0){n.push(e.substring(t-=i,t+i));i=Nn[r=(r+1)%Pn]}return n.reverse().join(Tn)}}e.geo={};Hn.prototype={s:0,t:0,add:function(e){jn(e,this.t,Bn);jn(Bn.s,this.s,this);this.s?this.t+=Bn.t:this.s=Bn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Bn=new Hn;e.geo.stream=function(e,t){e&&In.hasOwnProperty(e.type)?In[e.type](e,t):Fn(e,t)};var In={Feature:function(e,t){Fn(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)Fn(n[r].geometry,t)}},qn={Sphere:function(e,t){t.sphere()},Point:function(e,t){var n=e.coordinates;t.point(n[0],n[1])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length,s;while(++r<i)s=n[r],t.point(s[0],s[1])},LineString:function(e,t){Rn(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Rn(n[r],t,0)},Polygon:function(e,t){Un(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Un(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)Fn(n[r],t)}};e.geo.area=function(t){zn=0;e.geo.stream(t,Xn);return zn};var zn,Wn=new Hn,Xn={sphere:function(){zn+=4*St},point:C,lineStart:C,lineEnd:C,polygonStart:function(){Wn.reset();Xn.lineStart=Vn},polygonEnd:function(){var e=2*Wn;zn+=e<0?4*St+e:e;Xn.lineStart=Xn.lineEnd=Xn.point=C}};e.geo.bounds=function(){function p(e,s){l.push(c=[t=e,r=e]);s<n&&(n=s);s>i&&(i=s)}function d(e,o){var u=$n([e*Nt,o*Nt]);if(a){var f=Kn(a,u),l=[f[1],-f[0],0],c=Kn(l,f);Yn(c);c=Zn(c);var h=e-s,d=h>0?1:-1,v=c[0]*Ct*d,m=Math.abs(h)>180;if(m^(d*s<v&&v<d*e)){var g=c[1]*Ct;g>i&&(i=g)}else if(v=(v+360)%360-180,m^(d*s<v&&v<d*e)){var g=-c[1]*Ct;g<n&&(n=g)}else{o<n&&(n=o);o>i&&(i=o)}if(m)e<s?w(t,e)>w(t,r)&&(r=e):w(e,r)>w(t,r)&&(t=e);else if(r>=t){e<t&&(t=e);e>r&&(r=e)}else e>s?w(t,e)>w(t,r)&&(r=e):w(e,r)>w(t,r)&&(t=e)}else p(e,o);a=u,s=e}function v(){h.point=d}function m(){c[0]=t,c[1]=r;h.point=p;a=null}function g(e,t){if(a){var n=e-s;f+=Math.abs(n)>180?n+(n>0?360:-360):n}else o=e,u=t;Xn.point(e,t);d(e,t)}function y(){Xn.lineStart()}function b(){g(o,u);Xn.lineEnd();Math.abs(f)>xt&&(t=-(r=180));c[0]=t,c[1]=r;a=null}function w(e,t){return(t-=e)<0?t+360:t}function E(e,t){return e[0]-t[0]}function S(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var t,n,r,i,s,o,u,a,f,l,c,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g;h.lineStart=y;h.lineEnd=b;f=0;Xn.polygonStart()},polygonEnd:function(){Xn.polygonEnd();h.point=p;h.lineStart=v;h.lineEnd=m;Wn<0?(t=-(r=180),n=-(i=90)):f>xt?i=90:f<-xt&&(n=-90);c[0]=t,c[1]=r}};return function(s){i=r=-(t=n=Infinity);l=[];e.geo.stream(s,h);var o=l.length;if(o){l.sort(E);for(var u=1,a=l[0],f,p=[a];u<o;++u){f=l[u];if(S(f[0],a)||S(f[1],a)){w(a[0],f[1])>w(a[0],a[1])&&(a[1]=f[1]);w(f[0],a[1])>w(a[0],a[1])&&(a[0]=f[0])}else p.push(a=f)}var d=-Infinity,v;for(var o=p.length-1,u=0,a=p[o],f;u<=o;a=f,++u){f=p[u];(v=w(a[1],f[0]))>d&&(d=v,t=f[0],r=a[1])}}l=c=null;return t===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[t,n],[r,i]]}}();e.geo.centroid=function(t){tr=nr=rr=ir=sr=or=ur=ar=fr=lr=cr=0;e.geo.stream(t,hr);var n=fr,r=lr,i=cr,s=n*n+r*r+i*i;if(s<Tt){n=or,r=ur,i=ar;nr<xt&&(n=rr,r=ir,i=sr);s=n*n+r*r+i*i;if(s<Tt)return[NaN,NaN]}return[Math.atan2(r,n)*Ct,At(i/Math.sqrt(s))*Ct]};var tr,nr,rr,ir,sr,or,ur,ar,fr,lr,cr,hr={sphere:C,point:pr,lineStart:vr,lineEnd:mr,polygonStart:function(){hr.lineStart=gr},polygonEnd:function(){hr.lineStart=vr}},Cr=Er(yr,kr,Ar,Mr),Or=[-St,0],Dr=1e9;(e.geo.conicEqualArea=function(){return jr(Fr)}).raw=Fr;e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};e.geo.albersUsa=function(){function f(e){var t=e[0],n=e[1];i=null;(o(t,n),i)||(u(t,n),i)||a(t,n);return i}var t=e.geo.albers(),n=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i,s={point:function(e,t){i=[e,t]}},o,u,a;f.invert=function(e){var i=t.scale(),s=t.translate(),o=(e[0]-s[0])/i,u=(e[1]-s[1])/i;return(u>=.12&&u<.234&&o>=-0.425&&o<-0.214?n:u>=.166&&u<.234&&o>=-0.214&&o<-0.115?r:t).invert(e)};f.stream=function(e){var i=t.stream(e),s=n.stream(e),o=r.stream(e);return{point:function(e,t){i.point(e,t);s.point(e,t);o.point(e,t)},sphere:function(){i.sphere();s.sphere();o.sphere()},lineStart:function(){i.lineStart();s.lineStart();o.lineStart()},lineEnd:function(){i.lineEnd();s.lineEnd();o.lineEnd()},polygonStart:function(){i.polygonStart();s.polygonStart();o.polygonStart()},polygonEnd:function(){i.polygonEnd();s.polygonEnd();o.polygonEnd()}}};f.precision=function(e){if(!arguments.length)return t.precision();t.precision(e);n.precision(e);r.precision(e);return f};f.scale=function(e){if(!arguments.length)return t.scale();t.scale(e);n.scale(e*.35);r.scale(e);return f.translate(t.translate())};f.translate=function(e){if(!arguments.length)return t.translate();var i=t.scale(),l=+e[0],c=+e[1];o=t.translate(e).clipExtent([[l-.455*i,c-.238*i],[l+.455*i,c+.238*i]]).stream(s).point;u=n.translate([l-.307*i,c+.201*i]).clipExtent([[l-.425*i+xt,c+.12*i+xt],[l-.214*i-xt,c+.234*i-xt]]).stream(s).point;a=r.translate([l-.205*i,c+.212*i]).clipExtent([[l-.214*i+xt,c+.166*i+xt],[l-.115*i-xt,c+.234*i-xt]]).stream(s).point;return f};return f.scale(1070)};var Ir,qr,Rr={point:C,lineStart:C,lineEnd:C,polygonStart:function(){qr=0;Rr.lineStart=Ur},polygonEnd:function(){Rr.lineStart=Rr.lineEnd=Rr.point=C;Ir+=Math.abs(qr/2)}},zr,Wr,Xr,Vr,$r={point:Jr,lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C},Gr={point:Yr,lineStart:Zr,lineEnd:ei,polygonStart:function(){Gr.lineStart=ti},polygonEnd:function(){Gr.point=Yr;Gr.lineStart=Zr;Gr.lineEnd=ei}};e.geo.path=function(){function u(n){if(n){typeof t=="function"&&s.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=i(s);e.geo.stream(n,o)}return s.result()}function a(){o=null;return u}var t=4.5,n,r,i,s,o;u.area=function(t){Ir=0;e.geo.stream(t,i(Rr));return Ir};u.centroid=function(t){rr=ir=sr=or=ur=ar=fr=lr=cr=0;e.geo.stream(t,i(Gr));return cr?[fr/cr,lr/cr]:ar?[or/ar,ur/ar]:sr?[rr/sr,ir/sr]:[NaN,NaN]};u.bounds=function(t){Xr=Vr=-(zr=Wr=Infinity);e.geo.stream(t,i($r));return[[zr,Wr],[Xr,Vr]]};u.projection=function(e){if(!arguments.length)return n;i=(n=e)?e.stream||ii(e):fn;return a()};u.context=function(e){if(!arguments.length)return r;s=(r=e)==null?new Kr:new ni(e);typeof t!="function"&&s.pointRadius(t);return a()};u.pointRadius=function(e){if(!arguments.length)return t;t=typeof e=="function"?e:(s.pointRadius(+e),+e);return u};return u.projection(e.geo.albersUsa()).context(null)};e.geo.projection=si;e.geo.projectionMutator=oi;(e.geo.equirectangular=function(){return si(ai)}).raw=ai.invert=ai;e.geo.rotation=function(e){function t(t){t=e(t[0]*Nt,t[1]*Nt);return t[0]*=Ct,t[1]*=Ct,t}e=fi(e[0]%360*Nt,e[1]*Nt,e.length>2?e[2]*Nt:0);t.invert=function(t){t=e.invert(t[0]*Nt,t[1]*Nt);return t[0]*=Ct,t[1]*=Ct,t};return t};e.geo.circle=function(){function i(){var t=typeof e=="function"?e.apply(this,arguments):e,n=fi(-t[0]*Nt,-t[1]*Nt,0).invert,i=[];r(null,null,1,{point:function(e,t){i.push(e=n(e,t));e[0]*=Ct,e[1]*=Ct}});return{type:"Polygon",coordinates:[i]}}var e=[0,0],t,n=6,r;i.origin=function(t){if(!arguments.length)return e;e=t;return i};i.angle=function(e){if(!arguments.length)return t;r=pi((t=+e)*Nt,n*Nt);return i};i.precision=function(e){if(!arguments.length)return n;r=pi(t*Nt,(n=+e)*Nt);return i};return i.angle(90)};e.geo.distance=function(e,t){var n=(t[0]-e[0])*Nt,r=e[1]*Nt,i=t[1]*Nt,s=Math.sin(n),o=Math.cos(n),u=Math.sin(r),a=Math.cos(r),f=Math.sin(i),l=Math.cos(i),c;return Math.atan2(Math.sqrt((c=l*s)*c+(c=a*f-u*l*o)*c),u*f+a*l*o)};e.geo.graticule=function(){function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return e.range(Math.ceil(i/c)*c,r,c).map(v).concat(e.range(Math.ceil(a/h)*h,u,h).map(m)).concat(e.range(Math.ceil(n/f)*f,t,f).filter(function(e){return Math.abs(e%c)>xt}).map(p)).concat(e.range(Math.ceil(o/l)*l,s,l).filter(function(e){return Math.abs(e%h)>xt}).map(d))}var t,n,r,i,s,o,u,a,f=10,l=f,c=90,h=360,p,d,v,m,g=2.5;y.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})};y.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(m(u).slice(1),v(r).reverse().slice(1),m(a).reverse().slice(1))]}};y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()};y.majorExtent=function(e){if(!arguments.length)return[[i,a],[r,u]];i=+e[0][0],r=+e[1][0];a=+e[0][1],u=+e[1][1];i>r&&(e=i,i=r,r=e);a>u&&(e=a,a=u,u=e);return y.precision(g)};y.minorExtent=function(e){if(!arguments.length)return[[n,o],[t,s]];n=+e[0][0],t=+e[1][0];o=+e[0][1],s=+e[1][1];n>t&&(e=n,n=t,t=e);o>s&&(e=o,o=s,s=e);return y.precision(g)};y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()};y.majorStep=function(e){if(!arguments.length)return[c,h];c=+e[0],h=+e[1];return y};y.minorStep=function(e){if(!arguments.length)return[f,l];f=+e[0],l=+e[1];return y};y.precision=function(e){if(!arguments.length)return g;g=+e;p=vi(o,s,90);d=mi(n,t,g);v=vi(a,u,90);m=mi(i,r,g);return y};return y.majorExtent([[-180,-90+xt],[180,90-xt]]).minorExtent([[-180,-80-xt],[180,80+xt]])};e.geo.greatArc=function(){function s(){return{type:"LineString",coordinates:[n||t.apply(this,arguments),i||r.apply(this,arguments)]}}var t=gi,n,r=yi,i;s.distance=function(){return e.geo.distance(n||t.apply(this,arguments),i||r.apply(this,arguments))};s.source=function(e){if(!arguments.length)return t;t=e,n=typeof e=="function"?null:e;return s};s.target=function(e){if(!arguments.length)return r;r=e,i=typeof e=="function"?null:e;return s};s.precision=function(){return arguments.length?s:0};return s};e.geo.interpolate=function(e,t){return bi(e[0]*Nt,e[1]*Nt,t[0]*Nt,t[1]*Nt)};e.geo.length=function(t){wi=0;e.geo.stream(t,Ei);return wi};var wi,Ei={sphere:C,point:C,lineStart:Si,lineEnd:C,polygonStart:C,polygonEnd:C},Ti=xi(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(e.geo.azimuthalEqualArea=function(){return si(Ti)}).raw=Ti;var Ni=xi(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},fn);(e.geo.azimuthalEquidistant=function(){return si(Ni)}).raw=Ni;(e.geo.conicConformal=function(){return jr(Ci)}).raw=Ci;(e.geo.conicEquidistant=function(){return jr(ki)}).raw=ki;var Li=xi(function(e){return 1/e},Math.atan);(e.geo.gnomonic=function(){return si(Li)}).raw=Li;Ai.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-St/2]};(e.geo.mercator=function(){return Oi(Ai)}).raw=Ai;var Mi=xi(function(){return 1},Math.asin);(e.geo.orthographic=function(){return si(Mi)}).raw=Mi;var _i=xi(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(e.geo.stereographic=function(){return si(_i)}).raw=_i;Di.invert=function(e,t){return[Math.atan2(Ot(e),Math.cos(t)),At(Math.sin(t)/Mt(e))]};(e.geo.transverseMercator=function(){return Oi(Di)}).raw=Di;e.geom={};e.svg={};e.svg.line=function(){return Pi(fn)};var ji=e.map({linear:Fi,"linear-closed":Ii,step:qi,"step-before":Ri,"step-after":Ui,basis:Ji,"basis-open":Ki,"basis-closed":Qi,bundle:Gi,cardinal:Xi,"cardinal-open":zi,"cardinal-closed":Wi,monotone:os});ji.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});var Zi=[0,2/3,1/3,0],es=[0,1/3,2/3,0],ts=[0,1/6,2/3,1/6];e.geom.hull=function(e){function r(e){if(e.length<3)return[];var r=an(t),i=an(n),s=e.length,o,u=s-1,a=[],f=[],l,c,h,p=0,d,v,m,g,y,b,w,E;if(r===Hi&&n===Bi)o=e;else for(c=0,o=[];c<s;++c)o.push([+r.call(this,l=e[c],c),+i.call(this,l,c)]);for(c=1;c<s;++c)if(o[c][1]<o[p][1]||o[c][1]==o[p][1]&&o[c][0]<o[p][0])p=c;for(c=0;c<s;++c){if(c===p)continue;v=o[c][1]-o[p][1];d=o[c][0]-o[p][0];a.push({angle:Math.atan2(v,d),index:c})}a.sort(function(e,t){return e.angle-t.angle});w=a[0].angle;b=a[0].index;y=0;for(c=1;c<u;++c){h=a[c].index;if(w==a[c].angle){d=o[b][0]-o[p][0];v=o[b][1]-o[p][1];m=o[h][0]-o[p][0];g=o[h][1]-o[p][1];if(d*d+v*v>=m*m+g*g){a[c].index=-1;continue}a[y].index=-1}w=a[c].angle;y=c;b=h}f.push(p);for(c=0,h=0;c<2;++h)if(a[h].index>-1){f.push(a[h].index);c++}E=f.length;for(;h<u;++h){if(a[h].index<0)continue;while(!us(f[E-2],f[E-1],a[h].index,o))--E;f[E++]=a[h].index}var S=[];for(c=E-1;c>=0;--c)S.push(e[f[c]]);return S}var t=Hi,n=Bi;if(arguments.length)return r(e);r.x=function(e){return arguments.length?(t=e
,r):t};r.y=function(e){return arguments.length?(n=e,r):n};return r};e.geom.polygon=function(e){D(e,as);return e};var as=e.geom.polygon.prototype=[];as.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t){n=r;r=this[e];i+=n[1]*r[0]-n[0]*r[1]}return i*.5};as.centroid=function(e){var t=-1,n=this.length,r=0,i=0,s,o=this[n-1],u;arguments.length||(e=-1/(6*this.area()));while(++t<n){s=o;o=this[t];u=s[0]*o[1]-o[0]*s[1];r+=(s[0]+o[0])*u;i+=(s[1]+o[1])*u}return[r*e,i*e]};as.clip=function(e){var t,n=cs(e),r=-1,i=this.length-cs(this),s,o,u=this[i-1],a,f,l;while(++r<i){t=e.slice();e.length=0;a=this[r];f=t[(o=t.length-n)-1];s=-1;while(++s<o){l=t[s];if(fs(l,u,a)){fs(f,u,a)||e.push(ls(f,l,u,a));e.push(l)}else fs(f,u,a)&&e.push(ls(f,l,u,a));f=l}n&&e.push(e[0]);u=a}return e};e.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];ps(e,function(n){t[n.region.l.index].push(e[n.region.r.index])});t.forEach(function(t,r){var i=e[r],s=i[0],o=i[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-s,e[1]-o)});t.sort(function(e,t){return e.angle-t.angle});for(var u=0,a=t.length-1;u<a;u++)n.push([i,t[u],t[u+1]])});return n};e.geom.voronoi=function(t){function s(t){var s,o=t.map(function(){return[]}),u=an(n),a=an(r),f,l,c=t.length,h=1e6;if(u===Hi&&a===Bi)s=t;else for(s=new Array(c),l=0;l<c;++l)s[l]=[+u.call(this,f=t[l],l),+a.call(this,f,l)];ps(s,function(e){var t,n,r,i,s,u;if(e.a===1&&e.b>=0){t=e.ep.r;n=e.ep.l}else{t=e.ep.l;n=e.ep.r}if(e.a===1){s=t?t.y:-h;r=e.c-e.b*s;u=n?n.y:h;i=e.c-e.b*u}else{r=t?t.x:-h;s=e.c-e.a*r;i=n?n.x:h;u=e.c-e.a*i}var a=[r,s],f=[i,u];o[e.region.l.index].push(a,f);o[e.region.r.index].push(a,f)});o=o.map(function(t,n){var r=s[n][0],i=s[n][1],o=t.map(function(e){return Math.atan2(e[0]-r,e[1]-i)}),u=e.range(t.length).sort(function(e,t){return o[e]-o[t]});return u.filter(function(e,t){return!t||o[e]-o[u[t-1]]>xt}).map(function(e){return t[e]})});o.forEach(function(e,t){var n=e.length;if(!n)return e.push([-h,-h],[-h,h],[h,h],[h,-h]);if(n>2)return;var r=s[t],i=e[0],o=e[1],u=r[0],a=r[1],f=i[0],l=i[1],c=o[0],p=o[1],d=Math.abs(c-f),v=p-l;if(Math.abs(v)<xt){var m=a<l?-h:h;e.push([-h,m],[h,m])}else if(d<xt){var g=u<f?-h:h;e.push([g,-h],[g,h])}else{var m=(c-f)*(l-a)<(f-u)*(p-l)?h:-h,y=Math.abs(v)-d;if(Math.abs(y)<xt)e.push([v<0?m:-m,m]);else{y>0&&(m*=-1);e.push([-h,m],[h,m])}}});if(i)for(l=0;l<c;++l)i.clip(o[l]);for(l=0;l<c;++l)o[l].point=t[l];return o}var n=Hi,r=Bi,i=null;if(arguments.length)return s(t);s.x=function(e){return arguments.length?(n=e,s):n};s.y=function(e){return arguments.length?(r=e,s):r};s.clipExtent=function(t){if(!arguments.length)return i&&[i[0],i[2]];if(t==null)i=null;else{var n=+t[0][0],r=+t[0][1],o=+t[1][0],u=+t[1][1];i=e.geom.polygon([[n,r],[n,u],[o,u],[o,r]])}return s};s.size=function(e){return arguments.length?s.clipExtent(e&&[[0,0],e]):i&&i[2]};s.links=function(e){var t,i=e.map(function(){return[]}),s=[],o=an(n),u=an(r),a,f,l=e.length;if(o===Hi&&u===Bi)t=e;else for(t=new Array(l),f=0;f<l;++f)t[f]=[+o.call(this,a=e[f],f),+u.call(this,a,f)];ps(t,function(t){var n=t.region.l.index,r=t.region.r.index;if(i[n][r])return;i[n][r]=i[r][n]=!0;s.push({source:e[n],target:e[r]})});return s};s.triangles=function(t){if(n===Hi&&r===Bi)return e.geom.delaunay(t);var i=new Array(f),s=an(n),o=an(r),u,a=-1,f=t.length;while(++a<f)(i[a]=[+s.call(this,u=t[a],a),+o.call(this,u,a)]).data=u;return e.geom.delaunay(i).map(function(e){return e.map(function(e){return e.data})})};return s};var hs={l:"r",r:"l"};e.geom.quadtree=function(e,t,n,r,i){function a(e){function x(e,t,n,r,i,s,o,u){if(isNaN(n)||isNaN(r))return;if(e.leaf){var a=e.x,f=e.y;if(a!=null)if(Math.abs(a-n)+Math.abs(f-r)<.01)T(e,t,n,r,i,s,o,u);else{var l=e.point;e.x=e.y=e.point=null;T(e,l,a,f,i,s,o,u);T(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else T(e,t,n,r,i,s,o,u)}function T(e,t,n,r,i,s,o,u){var a=(i+o)*.5,f=(s+u)*.5,l=n>=a,c=r>=f,h=(c<<1)+l;e.leaf=!1;e=e.nodes[h]||(e.nodes[h]=ms());l?i=a:o=a;c?s=f:u=f;x(e,t,n,r,i,s,o,u)}var a,f=an(s),l=an(o),c,h,p,d,v,m,g,y;if(t!=null)v=t,m=n,g=r,y=i;else{g=y=-(v=m=Infinity);c=[],h=[];d=e.length;if(u)for(p=0;p<d;++p){a=e[p];a.x<v&&(v=a.x);a.y<m&&(m=a.y);a.x>g&&(g=a.x);a.y>y&&(y=a.y);c.push(a.x);h.push(a.y)}else for(p=0;p<d;++p){var b=+f(a=e[p],p),w=+l(a,p);b<v&&(v=b);w<m&&(m=w);b>g&&(g=b);w>y&&(y=w);c.push(b);h.push(w)}}var E=g-v,S=y-m;E>S?y=m+E:g=v+S;var N=ms();N.add=function(e){x(N,e,+f(e,++p),+l(e,p),v,m,g,y)};N.visit=function(e){gs(e,N,v,m,g,y)};p=-1;if(t==null){while(++p<d)x(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);c=h=e=a=null;return N}var s=Hi,o=Bi,u;if(u=arguments.length){s=ds;o=vs;if(u===3){i=n;r=t;n=t=0}return a(e)}a.x=function(e){return arguments.length?(s=e,a):s};a.y=function(e){return arguments.length?(o=e,a):o};a.extent=function(e){if(!arguments.length)return t==null?null:[[t,n],[r,i]];e==null?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]);return a};a.size=function(e){if(!arguments.length)return t==null?null:[r-t,i-n];e==null?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]);return a};return a};e.interpolateRgb=ys;e.interpolateObject=bs;e.interpolateNumber=ws;e.interpolateString=Es;var Ss=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;e.interpolate=xs;e.interpolators=[function(e,t){var n=typeof t;return(n==="string"?un.has(t)||/^(#|rgb\(|hsl\()/.test(t)?ys:Es:t instanceof gt?ys:n==="object"?Array.isArray(t)?Ts:bs:ws)(e,t)}];e.interpolateArray=Ts;var Ns=function(){return fn},Cs=e.map({linear:Ns,poly:Ps,quad:function(){return Ms},cubic:function(){return _s},sin:function(){return Hs},exp:function(){return Bs},circle:function(){return js},elastic:Fs,back:Is,bounce:function(){return qs}}),ks=e.map({"in":fn,out:As,"in-out":Os,"out-in":function(e){return Os(As(e))}});e.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";n=Cs.get(n)||Ns;r=ks.get(r)||fn;return Ls(r(n.apply(null,Array.prototype.slice.call(arguments,1))))};e.interpolateHcl=Rs;e.interpolateHsl=Us;e.interpolateLab=zs;e.interpolateRound=Ws;e.transform=function(n){var r=t.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Xs(t?t.matrix:Ks)})(n)};Xs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ks={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=Qs;e.layout={};e.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(Zs(e[n]));return t}};e.layout.chord=function(){function l(){var t={},l=[],h=e.range(s),p=[],d,v,m,g,y;n=[];r=[];d=0,g=-1;while(++g<s){v=0,y=-1;while(++y<s)v+=i[g][y];l.push(v);p.push(e.range(s));d+=v}u&&h.sort(function(e,t){return u(l[e],l[t])});a&&p.forEach(function(e,t){e.sort(function(e,n){return a(i[t][e],i[t][n])})});d=(2*St-o*s)/d;v=0,g=-1;while(++g<s){m=v,y=-1;while(++y<s){var b=h[g],w=p[b][y],E=i[b][w],S=v,x=v+=E*d;t[b+"-"+w]={index:b,subindex:w,startAngle:S,endAngle:x,value:E}}r[b]={index:b,startAngle:m,endAngle:v,value:(v-m)/d};v+=o}g=-1;while(++g<s){y=g-1;while(++y<s){var T=t[g+"-"+y],N=t[y+"-"+g];(T.value||N.value)&&n.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}}f&&c()}function c(){n.sort(function(e,t){return f((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var t={},n,r,i,s,o=0,u,a,f;t.matrix=function(e){if(!arguments.length)return i;s=(i=e)&&i.length;n=r=null;return t};t.padding=function(e){if(!arguments.length)return o;o=e;n=r=null;return t};t.sortGroups=function(e){if(!arguments.length)return u;u=e;n=r=null;return t};t.sortSubgroups=function(e){if(!arguments.length)return a;a=e;n=null;return t};t.sortChords=function(e){if(!arguments.length)return f;f=e;n&&c();return t};t.chords=function(){n||l();return n};t.groups=function(){r||l();return r};return t};e.layout.force=function(){function g(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=1/Math.sqrt(s*s+o*o);if((i-n)*u<c){var a=t.charge*u*u;e.px-=s*a;e.py-=o*a;return!0}if(t.point&&isFinite(u)){var a=t.pointCharge*u*u;e.px-=s*a;e.py-=o*a}}return!t.charge}}function y(n){n.px=e.event.x,n.py=e.event.y;t.resume()}var t={},n=e.dispatch("start","tick","end"),r=[1,1],i,s,o=.9,u=uo,a=ao,f=-30,l=.1,c=.8,h=[],p=[],d,v,m;t.tick=function(){if((s*=.99)<.005){n.end({type:"end",alpha:s=0});return!0}var t=h.length,i=p.length,u,a,c,y,b,w,E,S,x;for(a=0;a<i;++a){c=p[a];y=c.source;b=c.target;S=b.x-y.x;x=b.y-y.y;if(w=S*S+x*x){w=s*v[a]*((w=Math.sqrt(w))-d[a])/w;S*=w;x*=w;b.x-=S*(E=y.weight/(b.weight+y.weight));b.y-=x*E;y.x+=S*(E=1-E);y.y+=x*E}}if(E=s*l){S=r[0]/2;x=r[1]/2;a=-1;if(E)while(++a<t){c=h[a];c.x+=(S-c.x)*E;c.y+=(x-c.y)*E}}if(f){oo(u=e.geom.quadtree(h),s,m);a=-1;while(++a<t)(c=h[a]).fixed||u.visit(g(c))}a=-1;while(++a<t){c=h[a];if(c.fixed){c.x=c.px;c.y=c.py}else{c.x-=(c.px-(c.px=c.x))*o;c.y-=(c.py-(c.py=c.y))*o}}n.tick({type:"tick",alpha:s})};t.nodes=function(e){if(!arguments.length)return h;h=e;return t};t.links=function(e){if(!arguments.length)return p;p=e;return t};t.size=function(e){if(!arguments.length)return r;r=e;return t};t.linkDistance=function(e){if(!arguments.length)return u;u=typeof e=="function"?e:+e;return t};t.distance=t.linkDistance;t.linkStrength=function(e){if(!arguments.length)return a;a=typeof e=="function"?e:+e;return t};t.friction=function(e){if(!arguments.length)return o;o=+e;return t};t.charge=function(e){if(!arguments.length)return f;f=typeof e=="function"?e:+e;return t};t.gravity=function(e){if(!arguments.length)return l;l=+e;return t};t.theta=function(e){if(!arguments.length)return c;c=+e;return t};t.alpha=function(r){if(!arguments.length)return s;r=+r;if(s)r>0?s=r:s=0;else if(r>0){n.start({type:"start",alpha:s=r});e.timer(t.tick)}return t};t.start=function(){function y(t,n){var r=b(e),i=-1,s=r.length,o;while(++i<s)if(!isNaN(o=r[i][t]))return o;return Math.random()*n}function b(){if(!c){c=[];for(n=0;n<i;++n)c[n]=[];for(n=0;n<s;++n){var t=p[n];c[t.source.index].push(t.target);c[t.target.index].push(t.source)}}return c[e]}var e,n,i=h.length,s=p.length,o=r[0],l=r[1],c,g;for(e=0;e<i;++e){(g=h[e]).index=e;g.weight=0}for(e=0;e<s;++e){g=p[e];typeof g.source=="number"&&(g.source=h[g.source]);typeof g.target=="number"&&(g.target=h[g.target]);++g.source.weight;++g.target.weight}for(e=0;e<i;++e){g=h[e];isNaN(g.x)&&(g.x=y("x",o));isNaN(g.y)&&(g.y=y("y",l));isNaN(g.px)&&(g.px=g.x);isNaN(g.py)&&(g.py=g.y)}d=[];if(typeof u=="function")for(e=0;e<s;++e)d[e]=+u.call(this,p[e],e);else for(e=0;e<s;++e)d[e]=u;v=[];if(typeof a=="function")for(e=0;e<s;++e)v[e]=+a.call(this,p[e],e);else for(e=0;e<s;++e)v[e]=a;m=[];if(typeof f=="function")for(e=0;e<i;++e)m[e]=+f.call(this,h[e],e);else for(e=0;e<i;++e)m[e]=f;return t.resume()};t.resume=function(){return t.alpha(.1)};t.stop=function(){return t.alpha(0)};t.drag=function(){i||(i=e.behavior.drag().origin(fn).on("dragstart.force",no).on("drag.force",y).on("dragend.force",ro));if(!arguments.length)return i;this.on("mouseover.force",io).on("mouseout.force",so).call(i)};return e.rebind(t,n,"on")};var uo=20,ao=1;e.layout.hierarchy=function(){function r(i,o,u){var a=t.call(s,i,o);i.depth=o;u.push(i);if(a&&(l=a.length)){var f=-1,l,c=i.children=[],h=0,p=o+1,d;while(++f<l){d=r(a[f],p,u);d.parent=i;c.push(d);h+=d.value}e&&c.sort(e);n&&(i.value=h)}else n&&(i.value=+n.call(s,i,o)||0);return i}function i(e,t){var r=e.children,o=0;if(r&&(a=r.length)){var u=-1,a,f=t+1;while(++u<a)o+=i(r[u],f)}else n&&(o=+n.call(s,e,t)||0);n&&(e.value=o);return o}function s(e){var t=[];r(e,0,t);return t}var e=ho,t=lo,n=co;s.sort=function(t){if(!arguments.length)return e;e=t;return s};s.children=function(e){if(!arguments.length)return t;t=e;return s};s.value=function(e){if(!arguments.length)return n;n=e;return s};s.revalue=function(e){i(e,0);return e};return s};e.layout.partition=function(){function r(e,t,n,i){var s=e.children;e.x=t;e.y=e.depth*i;e.dx=n;e.dy=i;if(s&&(u=s.length)){var o=-1,u,a,f;n=e.value?n/e.value:0;while(++o<u){r(a=s[o],t,f=a.value*n,i);t+=f}}}function i(e){var t=e.children,n=0;if(t&&(s=t.length)){var r=-1,s;while(++r<s)n=Math.max(n,i(t[r]))}return 1+n}function s(e,s){var o=t.call(this,e,s);r(o[0],0,n[0],n[1]/i(o[0]));return o}var t=e.layout.hierarchy(),n=[1,1];s.size=function(e){if(!arguments.length)return n;n=e;return s};return fo(s,t)};e.layout.pie=function(){function s(o){var u=o.map(function(e,n){return+t.call(s,e,n)}),a=+(typeof r=="function"?r.apply(this,arguments):r),f=((typeof i=="function"?i.apply(this,arguments):i)-a)/e.sum(u),l=e.range(o.length);n!=null&&l.sort(n===vo?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])});var c=[];l.forEach(function(e){var t;c[e]={data:o[e],value:t=u[e],startAngle:a,endAngle:a+=t*f}});return c}var t=Number,n=vo,r=0,i=2*St;s.value=function(e){if(!arguments.length)return t;t=e;return s};s.sort=function(e){if(!arguments.length)return n;n=e;return s};s.startAngle=function(e){if(!arguments.length)return r;r=e;return s};s.endAngle=function(e){if(!arguments.length)return i;i=e;return s};return s};var vo={};e.layout.stack=function(){function u(a,f){var l=a.map(function(e,n){return t.call(u,e,n)}),c=l.map(function(e){return e.map(function(e,t){return[s.call(u,e,t),o.call(u,e,t)]})}),h=n.call(u,c,f);l=e.permute(l,h);c=e.permute(c,h);var p=r.call(u,c,f),d=l.length,v=l[0].length,m,g,y;for(g=0;g<v;++g){i.call(u,l[0][g],y=p[g],c[0][g][1]);for(m=1;m<d;++m)i.call(u,l[m][g],y+=c[m-1][g][1],c[m][g][1])}return a}var t=fn,n=Eo,r=So,i=yo,s=mo,o=go;u.values=function(e){if(!arguments.length)return t;t=e;return u};u.order=function(e){if(!arguments.length)return n;n=typeof e=="function"?e:bo.get(e)||Eo;return u};u.offset=function(e){if(!arguments.length)return r;r=typeof e=="function"?e:wo.get(e)||So;return u};u.x=function(e){if(!arguments.length)return s;s=e;return u};u.y=function(e){if(!arguments.length)return o;o=e;return u};u.out=function(e){if(!arguments.length)return i;i=e;return u};return u};var bo=e.map({"inside-out":function(t){var n=t.length,r,i,s=t.map(xo),o=t.map(To),u=e.range(n).sort(function(e,t){return s[e]-s[t]}),a=0,f=0,l=[],c=[];for(r=0;r<n;++r){i=u[r];if(a<f){a+=o[i];l.push(i)}else{f+=o[i];c.push(i)}}return c.reverse().concat(l)},reverse:function(t){return e.range(t.length).reverse()},"default":Eo}),wo=e.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u);r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,s,o,u,a,f,l,c,h,p=[];p[0]=c=h=0;for(s=1;s<r;++s){for(i=0,u=0;i<t;++i)u+=e[i][s][1];for(i=0,a=0,l=n[s][0]-n[s-1][0];i<t;++i){for(o=0,f=(e[i][s][1]-e[i][s-1][1])/(2*l);o<i;++o)f+=(e[o][s][1]-e[o][s-1][1])/l;a+=f*e[i][s][1]}p[s]=c-=u?a/u*l:0;c<h&&(h=c)}for(s=0;s<r;++s)p[s]-=h;return p},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:So});e.layout.histogram=function(){function s(s,o){var u=[],a=s.map(n,this),f=r.call(this,a,o),l=i.call(this,f,a,o),c,o=-1,h=a.length,p=l.length-1,d=t?1:1/h,v;while(++o<p){c=u[o]=[];c.dx=l[o+1]-(c.x=l[o]);c.y=0}if(p>0){o=-1;while(++o<h){v=a[o];if(v>=f[0]&&v<=f[1]){c=u[e.bisect(l,v,1,p)-1];c.y+=d;c.push(s[o])}}}return u}var t=!0,n=Number,r=Lo,i=Co;s.value=function(e){if(!arguments.length)return n;n=e;return s};s.range=function(e){if(!arguments.length)return r;r=an(e);return s};s.bins=function(e){if(!arguments.length)return i;i=typeof e=="number"?function(t){return ko(t,e)}:an(e);return s};s.frequency=function(e){if(!arguments.length)return t;t=!!e;return s};return s};e.layout.tree=function(){function s(e,s){function a(e,t){var r=e.children,i=e._tree;if(r&&(s=r.length)){var s,o=r[0],u,f=o,c,h=-1;while(++h<s){c=r[h];a(c,u);f=l(c,u,f);u=c}jo(e);var p=.5*(o._tree.prelim+c._tree.prelim);if(t){i.prelim=t._tree.prelim+n(e,t);i.mod=i.prelim-p}else i.prelim=p}else t&&(i.prelim=t._tree.prelim+n(e,t))}function f(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(i=n.length)){var r=-1,i;t+=e._tree.mod;while(++r<i)f(n[r],t)}}function l(e,t,r){if(t){var i=e,s=e,o=t,u=e.parent.children[0],a=i._tree.mod,f=s._tree.mod,l=o._tree.mod,c=u._tree.mod,h;while(o=Mo(o),i=Oo(i),o&&i){u=Oo(u);s=Mo(s);s._tree.ancestor=e;h=o._tree.prelim+l-i._tree.prelim-a+n(o,i);if(h>0){Fo(Io(o,e,r),e,h);a+=h;f+=h}l+=o._tree.mod;a+=i._tree.mod;c+=u._tree.mod;f+=s._tree.mod}if(o&&!Mo(s)){s._tree.thread=o;s._tree.mod+=l-f}if(i&&!Oo(u)){u._tree.thread=i;u._tree.mod+=a-c;r=e}}return r}var o=t.call(this,e,s),u=o[0];Bo(u,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}});a(u);f(u,-u._tree.prelim);var c=_o(u,Po),h=_o(u,Do),p=_o(u,Ho),d=c.x-n(c,h)/2,v=h.x+n(h,c)/2,m=p.depth||1;Bo(u,i?function(e){e.x*=r[0];e.y=e.depth*r[1];delete e._tree}:function(e){e.x=(e.x-d)/(v-d)*r[0];e.y=e.depth/m*r[1];delete e._tree});return o}var t=e.layout.hierarchy().sort(null).value(null),n=Ao,r=[1,1],i=!1;s.separation=function(e){if(!arguments.length)return n;n=e;return s};s.size=function(e){if(!arguments.length)return i?null:r;i=(r=e)==null;return s};s.nodeSize=function(e){if(!arguments.length)return i?r:null;i=(r=e)!=null;return s};return fo(s,t)};e.layout.pack=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a=r[0],f=r[1],l=i==null?Math.sqrt:typeof i=="function"?i:function(){return i};u.x=u.y=0;Bo(u,function(e){e.r=+l(e.value)});Bo(u,Wo);if(n){var c=n*(i?1:Math.max(2*u.r/a,2*u.r/f))/2;Bo(u,function(e){e.r+=c});Bo(u,Wo);Bo(u,function(e){e.r-=c})}$o(u,a/2,f/2,i?1:1/Math.max(2*u.r/a,2*u.r/f));return o}var t=e.layout.hierarchy().sort(qo),n=0,r=[1,1],i;s.size=function(e){if(!arguments.length)return r;r=e;return s};s.radius=function(e){if(!arguments.length)return i;i=e==null||typeof e=="function"?e:+e;return s};s.padding=function(e){if(!arguments.length)return n;n=+e;return s};return fo(s,t)};e.layout.cluster=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a,f=0;Bo(u,function(e){var t=e.children;if(t&&t.length){e.x=Qo(t);e.y=Ko(t)}else{e.x=a?f+=n(e,a):0;e.y=0;a=e}});var l=Go(u),c=Yo(u),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;Bo(u,i?function(e){e.x=(e.x-u.x)*r[0];e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0];e.y=(1-(u.y?e.y/u.y:1))*r[1]});return o}var t=e.layout.hierarchy().sort(null).value(null),n=Ao,r=[1,1],i=!1;s.separation=function(e){if(!arguments.length)return n;n=e;return s};s.size=function(e){if(!arguments.length)return i?null:r;i=(r=e)==null;return s};s.nodeSize=function(e){if(!arguments.length)return i?r:null;i=(r=e)!=null;return s};return fo(s,t)};e.layout.treemap=function(){function l(e,t){var n=-1,r=e.length,i,s;while(++n<r){s=(i=e[n]).value*(t<0?0:t);i.area=isNaN(s)||s<=0?0:s}}function c(e){var t=e.children;if(t&&t.length){var n=s(e),r=[],i=t.slice(),o,u=Infinity,f,h=a==="slice"?n.dx:a==="dice"?n.dy:a==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),v;l(i,n.dx*n.dy/e.value);r.area=0;while((v=i.length)>0){r.push(o=i[v-1]);r.area+=o.area;if(a!=="squarify"||(f=p(r,h))<=u){i.pop();u=f}else{r.area-=r.pop().area;d(r,h,n,!1);h=Math.min(n.dx,n.dy);r.length=r.area=0;u=Infinity}}if(r.length){d(r,h,n,!0);r.length=r.area=0}t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var n=s(e),r=t.slice(),i,o=[];l(r,n.dx*n.dy/e.value);o.area=0;while(i=r.pop()){o.push(i);o.area+=i.area;if(i.z!=null){d(o,i.z?n.dx:n.dy,n,!r.length);o.length=o.area=0}}t.forEach(h)}}function p(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,u=e.length;while(++o<u){if(!(r=e[o].area))continue;r<s&&(s=r);r>i&&(i=r)}n*=n;t*=t;return n?Math.max(t*i*f/n,n/(t*s*f)):Infinity}function d(e,t,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=t?n(e.area/t):0,l;if(t==r.dx){if(i||f>r.dy)f=r.dy;while(++s<o){l=e[s];l.x=u;l.y=a;l.dy=f;u+=l.dx=Math.min(r.x+r.dx-u,f?n(l.area/f):0)}l.z=!0;l.dx+=r.x+r.dx-u;r.y+=f;r.dy-=f}else{if(i||f>r.dx)f=r.dx;while(++s<o){l=e[s];l.x=u;l.y=a;l.dx=f;a+=l.dy=Math.min(r.y+r.dy-a,f?n(l.area/f):0)}l.z=!1;l.dy+=r.y+r.dy-a;r.x+=f;r.dx-=f}}function v(e){var n=u||t(e),i=n[0];i.x=0;i.y=0;i.dx=r[0];i.dy=r[1];u&&t.revalue(i);l([i],i.dx*i.dy/i.value);(u?h:c)(i);o&&(u=n);return n}var t=e.layout.hierarchy(),n=Math.round,r=[1,1],i=null,s=Zo,o=!1,u,a="squarify",f=.5*(1+Math.sqrt(5));v.size=function(e){if(!arguments.length)return r;r=e;return v};v.padding=function(e){function t(t){var n=e.call(v,t,t.depth);return n==null?Zo(t):eu(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return eu(t,e)}if(!arguments.length)return i;var r;s=(i=e)==null?Zo:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n;return v};v.round=function(e){if(!arguments.length)return n!=Number;n=e?Math.round:Number;return v};v.sticky=function(e){if(!arguments.length)return o;o=e;u=null;return v};v.ratio=function(e){if(!arguments.length)return f;f=e;return v};v.mode=function(e){if(!arguments.length)return a;a=e+"";return v};return fo(v,t)};e.random={normal:function(e,t){var n=arguments.length;n<2&&(t=1);n<1&&(e=0);return function(){var n,r,i;do{n=Math.random()*2-1;r=Math.random()*2-1;i=n*n+r*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t/e}}};e.scale={};var ou={floor:fn,ceil:fn};e.scale.linear=function(){return au([0,1],[0,1],xs,!1)};e.scale.log=function(){return vu(e.scale.linear().domain([0,1]),10,!0,[1,10])};var mu=e.format(".0e"),gu={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};e.scale.pow=function(){return yu(e.scale.linear(),1,[0,1])};e.scale.sqrt=function(){return e.scale.pow().exponent(.5)};e.scale.ordinal=function(){return wu([],{t:"range",a:[[]]})};e.scale.category10=function(){return e.scale.ordinal().range(Eu)};e.scale.category20=function(){return e.scale.ordinal().range(Su)};e.scale.category20b=function(){return e.scale.ordinal().range(xu)};e.scale.category20c=function(){return e.scale.ordinal().range(Tu)};var Eu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Qt),Su=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Qt),xu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Qt),Tu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Qt);e.scale.quantile=function(){return Nu([],[])};e.scale.quantize=function(){return Cu(0,1,[0,1])};e.scale.threshold=function(){return ku([.5],[0,1])};e.scale.identity=function(){return Lu([0,1])};e.svg.arc=function(){function i(){var i=e.apply(this,arguments),s=t.apply(this,arguments),o=n.apply(this,arguments)+Au,u=r.apply(this,arguments)+Au,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<St?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=Ou?i?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+ -i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":i?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+i*h+","+i*p+"A"+i+","+i+" 0 "+f+",0 "+i*l+","+i*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var e=Mu,t=_u,n=Du,r=Pu;i.innerRadius=function(t){if(!arguments.length)return e;e=an(t);return i};i.outerRadius=function(e){if(!arguments.length)return t;t=an(e);return i};i.startAngle=function(e){if(!arguments.length)return n;n=an(e);return i};i.endAngle=function(e){if(!arguments.length)return r;r=an(e);return i};i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+Au;return[Math.cos(s)*i,Math.sin(s)*i]};return i};var Au=-St/2,Ou=2*St-1e-6;e.svg.line.radial=function(){var e=Pi(Hu);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};Ri.reverse=Ui;Ui.reverse=Ri;e.svg.area=function(){return Bu(fn)};e.svg.area.radial=function(){var e=Bu(Hu);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};e.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)+Au,l=i.call(e,u,o)+Au;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>St)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=gi,t=yi,n=ju,r=Du,i=Pu;s.radius=function(e){if(!arguments.length)return n;n=an(e);return s};s.source=function(t){if(!arguments.length)return e;e=an(t);return s};s.target=function(e){if(!arguments.length)return t;t=an(e);return s};s.startAngle=function(e){if(!arguments.length)return r;r=an(e);return s};s.endAngle=function(e){if(!arguments.length)return i;i=an(e);return s};return s};e.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];a=a.map(n);return"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=gi,t=yi,n=Fu;r.source=function(t){if(!arguments.length)return e;e=an(t);return r};r.target=function(e){if(!arguments.length)return t;t=an(e);return r};r.projection=function(e){if(!arguments.length)return n;n=e;return r};return r};e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=Fu,r=t.projection;t.projection=function(e){return arguments.length?r(Iu(n=e)):n};return t};e.svg.symbol=function(){function n(n,r){return(zu.get(e.call(this,n,r))||Uu)(t.call(this,n,r))}var e=Ru,t=qu;n.type=function(t){if(!arguments.length)return e;e=an(t);return n};n.size=function(e){if(!arguments.length)return t;t=an(e);return n};return n};var zu=e.map({circle:Uu,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Xu)),n=t*Xu;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Wu),n=t*Wu/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Wu),n=t*Wu/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});e.svg.symbolTypes=zu.keys();var Wu=Math.sqrt(3),Xu=Math.tan(30*Nt),$u=[],Ju=0,Ku,Qu;$u.call=I.call;$u.empty=I.empty;$u.node=I.node;$u.size=I.size;e.transition=function(e){return arguments.length?Ku?e.transition():e:it.transition()};e.transition.prototype=$u;$u.select=function(e){var t=this.id,n=[],r,i,s;e=q(e);for(var o=-1,u=this.length;++o<u;){n.push(r=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)if((s=a[f])&&(i=e.call(s,s.__data__,f,o))){"__data__"in s&&(i.__data__=s.__data__);Zu(i,f,t,s.__transition__[t]);r.push(i)}else r.push(null)}return Vu(n,t)};$u.selectAll=function(e){var t=this.id,n=[],r,i,s,o,u;e=R(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(s=l[c]){u=s.__transition__[t];i=e.call(s,s.__data__,c,a);n.push(r=[]);for(var p=-1,d=i.length;++p<d;){(o=i[p])&&Zu(o,p,t,u);r.push(o)}}return Vu(n,t)};$u.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=Y(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]);for(var r=this[s],u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return Vu(t,this.id)};$u.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):et(this,t==null?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})};$u.attr=function(t,n){function s(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function u(e){return e==null?s:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function a(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r=t=="transform"?Qs:xs,i=e.ns.qualify(t);return Gu(this,"attr."+t,n,i.local?a:u)};$u.attrTween=function(t,n){function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function s(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?s:i)};$u.style=function(e,t,n){function s(){this.style.removeProperty(e)}function o(t){return t==null?s:(t+="",function(){var i=r.getComputedStyle(this,null).getPropertyValue(e),s;return i!==t&&(s=xs(i,t),function(t){this.style.setProperty(e,s(t),n)})})}var i=arguments.length;if(i<3){if(typeof e!="string"){i<2&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Gu(this,"style."+e,t,o)};$u.styleTween=function(e,t,n){function i(i,s){var o=t.call(this,i,s,r.getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}arguments.length<3&&(n="");return this.tween("style."+e,i)};$u.text=function(e){return Gu(this,"text",e,Yu)};$u.remove=function(){return this.each("end.transition",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})};$u.ease=function(t){var n=this.id;if(arguments.length<1)return this.node().__transition__[n].ease;typeof t!="function"&&(t=e.ease.apply(e,arguments));return et(this,function(e){e.__transition__[n].ease=t})};$u.delay=function(e){var t=this.id;return et(this,typeof e=="function"?function(n,r,i){n.__transition__[t].delay=e.call(n,n.__data__,r,i)|0}:(e|=0,function(n){n.__transition__[t].delay=e}))};$u.duration=function(e){var t=this.id;return et(this,typeof e=="function"?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i)|0)}:(e=Math.max(1,e|0),function(n){n.__transition__[t].duration=e}))};$u.each=function(t,n){var r=this.id;if(arguments.length<2){var i=Qu,s=Ku;Ku=r;et(this,function(e,n,i){Qu=e.__transition__[r];t.call(e,e.__data__,n,i)});Qu=i;Ku=s}else et(this,function(i){var s=i.__transition__[r];(s.event||(s.event=e.dispatch("start","end"))).on(t,n)});return this};$u.transition=function(){var e=this.id,t=++Ju,n=[],r,i,s,o;for(var u=0,a=this.length;u<a;u++){n.push(r=[]);for(var i=this[u],f=0,l=i.length;f<l;f++){if(s=i[f]){o=Object.create(s.__transition__[e]);o.delay+=o.duration;Zu(s,f,t,o)}r.push(s)}}return Vu(n,t)};e.svg.axis=function(){function c(c){c.each(function(){var c=e.select(this),h=a==null?t.ticks?t.ticks.apply(t,u):t.domain():a,p=f==null?t.tickFormat?t.tickFormat.apply(t,u):String:f,d=ia(t,h,l),v=c.selectAll(".tick.minor").data(d,String),m=v.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),g=e.transition(v.exit()).style("opacity",1e-6).remove(),y=e.transition(v).style("opacity",1),b=c.selectAll(".tick.major").data(h,String),w=b.enter().insert("g",".domain").attr("class","tick major").style("opacity",1e-6),E=e.transition(b.exit()).style("opacity",1e-6).remove(),S=e.transition(b).style("opacity",1),x,T=nu(t),N=c.selectAll(".domain").data([0]),C=(N.enter().append("path").attr("class","domain"),e.transition(N)),k=t.copy(),L=this.__chart__||k;this.__chart__=k;w.append("line");w.append("text");var A=w.select("line"),O=S.select("line"),M=b.select("text").text(p),_=w.select("text"),D=S.select("text");switch(n){case"bottom":x=na;m.attr("y2",i);y.attr("x2",0).attr("y2",i);A.attr("y2",r);_.attr("y",Math.max(r,0)+o);O.attr("x2",0).attr("y2",r);D.attr("x",0).attr("y",Math.max(r,0)+o);M.attr("dy",".71em").style("text-anchor","middle");C.attr("d","M"+T[0]+","+s+"V0H"+T[1]+"V"+s);break;case"top":x=na;m.attr("y2",-i);y.attr("x2",0).attr("y2",-i);A.attr("y2",-r);_.attr("y",-(Math.max(r,0)+o));O.attr("x2",0).attr("y2",-r);D.attr("x",0).attr("y",-(Math.max(r,0)+o));M.attr("dy","0em").style("text-anchor","middle");C.attr("d","M"+T[0]+","+ -s+"V0H"+T[1]+"V"+ -s);break;case"left":x=ra;m.attr("x2",-i);y.attr("x2",-i).attr("y2",0);A.attr("x2",-r);_.attr("x",-(Math.max(r,0)+o));O.attr("x2",-r).attr("y2",0);D.attr("x",-(Math.max(r,0)+o)).attr("y",0);M.attr("dy",".32em").style("text-anchor","end");C.attr("d","M"+ -s+","+T[0]+"H0V"+T[1]+"H"+ -s);break;case"right":x=ra;m.attr("x2",i);y.attr("x2",i).attr("y2"
,0);A.attr("x2",r);_.attr("x",Math.max(r,0)+o);O.attr("x2",r).attr("y2",0);D.attr("x",Math.max(r,0)+o).attr("y",0);M.attr("dy",".32em").style("text-anchor","start");C.attr("d","M"+s+","+T[0]+"H0V"+T[1]+"H"+s)}if(t.rangeBand){var P=k.rangeBand()/2,H=function(e){return k(e)+P};w.call(x,H);S.call(x,H)}else{w.call(x,L);S.call(x,k);E.call(x,k);m.call(x,L);y.call(x,k);g.call(x,k)}})}var t=e.scale.linear(),n=ea,r=6,i=6,s=6,o=3,u=[10],a=null,f,l=0;c.scale=function(e){if(!arguments.length)return t;t=e;return c};c.orient=function(e){if(!arguments.length)return n;n=e in ta?e+"":ea;return c};c.ticks=function(){if(!arguments.length)return u;u=arguments;return c};c.tickValues=function(e){if(!arguments.length)return a;a=e;return c};c.tickFormat=function(e){if(!arguments.length)return f;f=e;return c};c.tickSize=function(e,t){if(!arguments.length)return r;var n=arguments.length-1;r=+e;i=n>1?+t:r;s=n>0?+arguments[n]:r;return c};c.tickPadding=function(e){if(!arguments.length)return o;o=+e;return c};c.tickSubdivide=function(e){if(!arguments.length)return l;l=+e;return c};return c};var ea="bottom",ta={top:1,right:1,bottom:1,left:1};e.svg.brush=function(){function f(t){t.each(function(){var t=e.select(this),r=t.selectAll(".background").data([0]),o=t.selectAll(".extent").data([0]),u=t.selectAll(".resize").data(s,String),a;t.style("pointer-events","all").on("mousedown.brush",p).on("touchstart.brush",p);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");o.enter().append("rect").attr("class","extent").style("cursor","move");u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return sa[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");u.style("display",f.empty()?"none":null);u.exit().remove();if(n){a=nu(n);r.attr("x",a[0]).attr("width",a[1]-a[0]);c(t)}if(i){a=nu(i);r.attr("y",a[0]).attr("height",a[1]-a[0]);h(t)}l(t)})}function l(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+o[+/e$/.test(e)][0]+","+o[+/^s/.test(e)][1]+")"})}function c(e){e.select(".extent").attr("x",o[0][0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1][0]-o[0][0])}function h(e){e.select(".extent").attr("y",o[0][1]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",o[1][1]-o[0][1])}function p(){function k(){var t=e.event.changedTouches;return t?e.touches(s,t)[0]:e.mouse(s)}function L(){if(e.event.keyCode==32){if(!b){E=null;S[0]-=o[1][0];S[1]-=o[1][1];b=2}A()}}function O(){if(e.event.keyCode==32&&b==2){S[0]+=o[1][0];S[1]+=o[1][1];b=0;A()}}function M(){var t=k(),r=!1;if(x){t[0]+=x[0];t[1]+=x[1]}if(!b)if(e.event.altKey){E||(E=[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]);S[0]=o[+(t[0]<E[0])][0];S[1]=o[+(t[1]<E[1])][1]}else E=null;if(g&&_(t,n,0)){c(v);r=!0}if(y&&_(t,i,1)){h(v);r=!0}if(r){l(v);d({type:"brush",mode:b?"move":"resize"})}}function _(e,t,n){var r=nu(t),i=r[0],s=r[1],f=S[n],l=o[1][n]-o[0][n],c,h;if(b){i-=f;s-=l+f}c=u[n]?Math.max(i,Math.min(s,e[n])):e[n];if(b)h=(c+=f)+l;else{E&&(f=Math.max(i,Math.min(s,2*E[n]-c)));if(f<c){h=c;c=f}else h=f}if(o[0][n]!==c||o[1][n]!==h){a=null;o[0][n]=c;o[1][n]=h;return!0}}function D(){M();v.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null);e.select("body").style("cursor",null);T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);w();d({type:"brushend"})}var s=this,p=e.select(e.event.target),d=t.of(s,arguments),v=e.select(s),m=p.datum(),g=!/^(n|s)$/.test(m)&&n,y=!/^(e|w)$/.test(m)&&i,b=p.classed("extent"),w=ct(),E,S=k(),x,T=e.select(r).on("keydown.brush",L).on("keyup.brush",O);e.event.changedTouches?T.on("touchmove.brush",M).on("touchend.brush",D):T.on("mousemove.brush",M).on("mouseup.brush",D);if(b){S[0]=o[0][0]-S[0];S[1]=o[0][1]-S[1]}else if(m){var N=+/w$/.test(m),C=+/^n/.test(m);x=[o[1-N][0]-S[0],o[1-C][1]-S[1]];S[0]=o[N][0];S[1]=o[C][1]}else e.event.altKey&&(E=S.slice());v.style("pointer-events","none").selectAll(".resize").style("display",null);e.select("body").style("cursor",p.style("cursor"));d({type:"brushstart"});M()}var t=M(f,"brushstart","brush","brushend"),n=null,i=null,s=oa[0],o=[[0,0],[0,0]],u=[!0,!0],a;f.x=function(e){if(!arguments.length)return n;n=e;s=oa[!n<<1|!i];return f};f.y=function(e){if(!arguments.length)return i;i=e;s=oa[!n<<1|!i];return f};f.clamp=function(e){if(!arguments.length)return n&&i?u:n||i?u[+!n]:null;if(n&&i)u=[!!e[0],!!e[1]];else if(n||i)u[+!n]=!!e;return f};f.extent=function(e){var t,r,s,u,l;if(!arguments.length){e=a||o;if(n){t=e[0][0],r=e[1][0];if(!a){t=o[0][0],r=o[1][0];n.invert&&(t=n.invert(t),r=n.invert(r));r<t&&(l=t,t=r,r=l)}}if(i){s=e[0][1],u=e[1][1];if(!a){s=o[0][1],u=o[1][1];i.invert&&(s=i.invert(s),u=i.invert(u));u<s&&(l=s,s=u,u=l)}}return n&&i?[[t,s],[r,u]]:n?[t,r]:i&&[s,u]}a=[[0,0],[0,0]];if(n){t=e[0],r=e[1];i&&(t=t[0],r=r[0]);a[0][0]=t,a[1][0]=r;n.invert&&(t=n(t),r=n(r));r<t&&(l=t,t=r,r=l);o[0][0]=t|0,o[1][0]=r|0}if(i){s=e[0],u=e[1];n&&(s=s[1],u=u[1]);a[0][1]=s,a[1][1]=u;i.invert&&(s=i(s),u=i(u));u<s&&(l=s,s=u,u=l);o[0][1]=s|0,o[1][1]=u|0}return f};f.clear=function(){a=null;o[0][0]=o[0][1]=o[1][0]=o[1][1]=0;return f};f.empty=function(){return n&&o[0][0]===o[1][0]||i&&o[0][1]===o[1][1]};return e.rebind(f,t,"on")};var sa={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},oa=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.time={};var ua=Date,aa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];fa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){la.setUTCDate.apply(this._,arguments)},setDay:function(){la.setUTCDay.apply(this._,arguments)},setFullYear:function(){la.setUTCFullYear.apply(this._,arguments)},setHours:function(){la.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){la.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){la.setUTCMinutes.apply(this._,arguments)},setMonth:function(){la.setUTCMonth.apply(this._,arguments)},setSeconds:function(){la.setUTCSeconds.apply(this._,arguments)},setTime:function(){la.setTime.apply(this._,arguments)}};var la=Date.prototype,ca="%a %b %e %X %Y",ha="%m/%d/%Y",pa="%H:%M:%S",da=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],va=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ma=["January","February","March","April","May","June","July","August","September","October","November","December"],ga=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.time.year=ya(function(t){t=e.time.day(t);t.setMonth(0,1);return t},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});e.time.years=e.time.year.range;e.time.years.utc=e.time.year.utc.range;e.time.day=ya(function(e){var t=new ua(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});e.time.days=e.time.day.range;e.time.days.utc=e.time.day.utc.range;e.time.dayOfYear=function(t){var n=e.time.year(t);return Math.floor((t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/864e5)};aa.forEach(function(t,n){t=t.toLowerCase();n=7-n;var r=e.time[t]=ya(function(t){(t=e.time.day(t)).setDate(t.getDate()-(t.getDay()+n)%7);return t},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(t){var r=e.time.year(t).getDay();return Math.floor((e.time.dayOfYear(t)+(r+n)%7)/7)-(r!==n)});e.time[t+"s"]=r.range;e.time[t+"s"].utc=r.utc.range;e.time[t+"OfYear"]=function(t){var r=e.time.year(t).getDay();return Math.floor((e.time.dayOfYear(t)+(r+n)%7)/7)}});e.time.week=e.time.sunday;e.time.weeks=e.time.sunday.range;e.time.weeks.utc=e.time.sunday.utc.range;e.time.weekOfYear=e.time.sundayOfYear;e.time.format=function(e){function n(n){var r=[],i=-1,s=0,o,u,a;while(++i<t)if(e.charCodeAt(i)===37){r.push(e.substring(s,i));(u=Da[o=e.charAt(++i)])!=null&&(o=e.charAt(++i));if(a=Pa[o])o=a(n,u==null?o==="e"?" ":"0":u);r.push(o);s=i+1}r.push(e.substring(s,i));return r.join("")}var t=e.length;n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=wa(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+n.p*12);var i=new ua;if("j"in n)i.setFullYear(n.y,0,n.j);else if("w"in n&&("W"in n||"U"in n)){i.setFullYear(n.y,0,1);i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(i.getDay()+5)%7:n.w+n.U*7-(i.getDay()+6)%7)}else i.setFullYear(n.y,n.m,n.d);i.setHours(n.H,n.M,n.S,n.L);return i};n.toString=function(){return e};return n};var Ta=Ea(da),Na=Sa(da),Ca=Ea(va),ka=Sa(va),La=Ea(ma),Aa=Sa(ma),Oa=Ea(ga),Ma=Sa(ga),_a=/^%/,Da={"-":"",_:" ",0:"0"},Pa={a:function(e){return va[e.getDay()]},A:function(e){return da[e.getDay()]},b:function(e){return ga[e.getMonth()]},B:function(e){return ma[e.getMonth()]},c:e.time.format(ca),d:function(e,t){return xa(e.getDate(),t,2)},e:function(e,t){return xa(e.getDate(),t,2)},H:function(e,t){return xa(e.getHours(),t,2)},I:function(e,t){return xa(e.getHours()%12||12,t,2)},j:function(t,n){return xa(1+e.time.dayOfYear(t),n,3)},L:function(e,t){return xa(e.getMilliseconds(),t,3)},m:function(e,t){return xa(e.getMonth()+1,t,2)},M:function(e,t){return xa(e.getMinutes(),t,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e,t){return xa(e.getSeconds(),t,2)},U:function(t,n){return xa(e.time.sundayOfYear(t),n,2)},w:function(e){return e.getDay()},W:function(t,n){return xa(e.time.mondayOfYear(t),n,2)},x:e.time.format(ha),X:e.time.format(pa),y:function(e,t){return xa(e.getFullYear()%100,t,2)},Y:function(e,t){return xa(e.getFullYear()%1e4,t,4)},Z:of,"%":function(){return"%"}},Ha={a:Ba,A:ja,b:Ra,B:Ua,c:za,d:Qa,e:Qa,H:Ya,I:Ya,j:Ga,L:tf,m:Ka,M:Za,p:rf,S:ef,U:Ia,w:Fa,W:qa,x:Wa,X:Xa,y:$a,Y:Va,"%":uf},nf=/^\s*\d+/,sf=e.map({am:0,pm:1});e.time.format.utc=function(t){function r(e){try{ua=fa;var t=new ua;t._=e;return n(t)}finally{ua=Date}}var n=e.time.format(t);r.parse=function(e){try{ua=fa;var t=n.parse(e);return t&&t._}finally{ua=Date}};r.toString=n.toString;return r};var af=e.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");e.time.format.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?ff:af;ff.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};ff.toString=af.toString;e.time.second=ya(function(e){return new ua(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});e.time.seconds=e.time.second.range;e.time.seconds.utc=e.time.second.utc.range;e.time.minute=ya(function(e){return new ua(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});e.time.minutes=e.time.minute.range;e.time.minutes.utc=e.time.minute.utc.range;e.time.hour=ya(function(e){var t=e.getTimezoneOffset()/60;return new ua((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});e.time.hours=e.time.hour.range;e.time.hours.utc=e.time.hour.utc.range;e.time.month=ya(function(t){t=e.time.day(t);t.setDate(1);return t},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});e.time.months=e.time.month.range;e.time.months.utc=e.time.month.utc.range;var vf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],mf=[[e.time.second,1],[e.time.second,5],[e.time.second,15],[e.time.second,30],[e.time.minute,1],[e.time.minute,5],[e.time.minute,15],[e.time.minute,30],[e.time.hour,1],[e.time.hour,3],[e.time.hour,6],[e.time.hour,12],[e.time.day,1],[e.time.day,2],[e.time.week,1],[e.time.month,1],[e.time.month,3],[e.time.year,1]],gf=[[e.time.format("%Y"),yr],[e.time.format("%B"),function(e){return e.getMonth()}],[e.time.format("%b %d"),function(e){return e.getDate()!=1}],[e.time.format("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[e.time.format("%I %p"),function(e){return e.getHours()}],[e.time.format("%I:%M"),function(e){return e.getMinutes()}],[e.time.format(":%S"),function(e){return e.getSeconds()}],[e.time.format(".%L"),function(e){return e.getMilliseconds()}]],yf=e.scale.linear(),bf=hf(gf);mf.year=function(e,t){return yf.domain(e.map(df)).ticks(t).map(pf)};e.time.scale=function(){return lf(e.scale.linear(),mf,bf)};var wf=mf.map(function(e){return[e[0].utc,e[1]]}),Ef=[[e.time.format.utc("%Y"),yr],[e.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[e.time.format.utc("%b %d"),function(e){return e.getUTCDate()!=1}],[e.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],[e.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[e.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[e.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[e.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]],Sf=hf(Ef);wf.year=function(e,t){return yf.domain(e.map(Tf)).ticks(t).map(xf)};e.time.scale.utc=function(){return lf(e.scale.linear(),wf,Sf)};e.text=ln(function(e){return e.responseText});e.json=function(e,t){return cn(e,"application/json",Nf,t)};e.html=function(e,t){return cn(e,"text/html",Cf,t)};e.xml=ln(function(e){return e.responseXML});return e}();var Graph=function(e){var t=function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},n=function(e,t){return parseFloat(e)-parseFloat(t)},r=function(r,i,s,o){o=o||Infinity;var u={},a={0:[i]},f={},l,c=function(e,t){var n=""+e;a[n]||(a[n]=[]);a[n].push(t)};u[i]=0;while(a){if(!(l=t(a)).length)break;l.sort(n);var h=l[0],p=a[h],d=p.shift(),v=parseFloat(h),m=r[d]||{};p.length||delete a[h];for(var g in m)if(Object.prototype.hasOwnProperty.call(m,g)){var y=m[g],b=y+v,w=u[g];if(w===e||w>b){u[g]=b;c(b,g);f[g]=d}}}return u[s]===e?null:f},i=function(e,t){var n=[],r=t;while(r){n.push(r);predecessor=e[r];r=e[r]}n.reverse();return n},s=function(e,t){var n=t.shift(),s,o,u=[],a;while(t.length){s=t.shift();o=r(e,n,s);if(!o)return null;a=i(o,s);if(!t.length)return u.concat(a);u.push.apply(u,a.slice(0,-1));n=s}},o=function(e,t){try{return Array.prototype.slice.call(e,t)}catch(n){var r=[];for(var i=t||0,s=e.length;i<s;++i)r.push(e[i]);return r}},u=function(e){this.map=e};u.prototype.findShortestPath=function(e,t){return Object.prototype.toString.call(e)==="[object Array]"?s(this.map,e):arguments.length===2?s(this.map,[e,t]):s(this.map,o(arguments))};u.findShortestPath=function(e,t,n){return Object.prototype.toString.call(t)==="[object Array]"?s(e,t):arguments.length===3?s(e,[t,n]):s(e,o(arguments,1))};return u}(),dv={data:{},dato:{},keys:{},load:{},postload:{},state:{},dim:{},scale:{},path:{},html:{},svg:{},write:{},rewrite:{},draw:{},redraw:{},create:{},update:{},calc:{},format:{},util:{}};dv.opt={path:{msa:"data/MSAPlaced.csv",links:"data/Links.csv"},city:{radius:{min:3,max:12},stroke:{min:1,max:2},font:{min:14,max:20},popmin:1e6,near:{max:1449e3,min:96600}},colors:["#7f0000","#d7301f","#fc8d59","#4292c6","#08519c"],rose:{petals:8,distances:[1,2,3,4,5]},map:{scale:1.34,grid:10},mindim:{h:900,w:1200}};dv.load.data=function(){dv.update.loadState(2);d3.csv(dv.opt.path.msa,function(e,t){dv.data.msa=t;dv.update.loadState(-1)});d3.csv(dv.opt.path.links,function(e,t){dv.data.links=t;dv.update.loadState(-1)})};dv.postload.data=function(){dv.create.index({data:dv.data.msa,indexName:"msa",keyName:"fips",col:"FIPS"});dv.create.network();dv.create.variables();dv.create.dims();dv.create.scales();dv.create.paths();dv.draw.rose();dv.draw.links();dv.draw.cities();dv.draw.labels();dv.redraw.map(41860)};dv.create.start=function(){dv.load.data()};dv.create.variables=function(){dv.html.body=d3.select("body");dv.opt.rose.arc=Math.PI/dv.opt.rose.petals;dv.data.rose=[]};dv.create.majorDistances=function(){var e,t;for(e=dv.data.msa.length-1;e>=0;e--){t=dv.data.msa[e];console.log(t.City);dv.create.bigNearbyCities(t)}};dv.create.bigNearbyCities=function(e){var t=0,n,r,i,s;dv.update.dist(e.FIPS);n=dv.data.msa.slice(0);dv.util.aooSort({array:n,key:"Population"});r=n.length-1;while(t<5&&r>=0){i=n[r];s=dv.dato.dist[i.FIPS];if(s<=dv.opt.city.near.max&&s>=dv.opt.city.near.min){e["nearFIPS"+t]=i.FIPS;e["nearDist"+t]=s;t++}r--}};dv.create.dims=function(){var e=dv.opt.mindim;dv.html.win=window||document.documentElement||document.getElementsByTagName("body")[0];dv.dim.win={w:dv.html.win.innerWidth||dv.html.win.clientWidth||dv.html.win.clientWidth,h:dv.html.win.innerHeight||dv.html.win.clientHeight||dv.html.win.clientHeight};dv.dim.body={top:parseInt(dv.html.body.style("margin-top"),10),right:parseInt(dv.html.body.style("margin-right"),10),bottom:parseInt(dv.html.body.style("margin-bottom"),10),left:parseInt(dv.html.body.style("margin-left"),10)};dv.draw.svg();dv.dim.svg={h:(dv.dim.win.w-dv.html.svg.offsetTop-dv.dim.body.bottom)*.75,w:dv.dim.win.w-dv.html.svg.offsetLeft-dv.dim.body.right};dv.dim.svg.h=dv.dim.svg.h<e.h?e.h:dv.dim.svg.h;dv.dim.svg.w=dv.dim.svg.w<e.w?e.w:dv.dim.svg.w;dv.scale.map=dv.dim.win.w*dv.opt.map.scale;dv.redraw.svg()};dv.create.network=function(){dv.dato.network={};var e,t,n,r=dv.dato.network;for(e=dv.data.links.length-1;e>=0;e--){t=dv.data.links[e];r[t.c1fips]=r[t.c1fips]||{};r[t.c2fips]=r[t.c2fips]||{};n=parseInt(t.dist,10);r[t.c1fips][t.c2fips]=r[t.c1fips][t.c2fips]||{dist:n};r[t.c2fips][t.c1fips]=r[t.c2fips][t.c1fips]||{dist:n}}dv.calc.graph=new Graph(r)};dv.create.scales=function(){var e=dv.scale.map,t=dv.opt.city,n=d3.extent(dv.data.msa,function(e){return parseInt(e.Population,10)});dv.scale.projection=d3.geo.albers().scale(e).translate([e/2.7,e/3.5]);dv.path.shape=d3.geo.path().projection(dv.scale.projection);dv.scale.r=d3.scale.pow().exponent(.5).domain(n).rangeRound([t.radius.min,t.radius.max]);dv.scale.strokeW=d3.scale.pow().exponent(.5).domain(n).rangeRound([t.stroke.min,t.stroke.max]);dv.scale.font=d3.scale.pow().exponent(.5).domain([t.popmin,n[1]]).rangeRound([t.font.min,t.font.max]);dv.scale.fill=d3.scale.quantize().domain([5,0]).range(dv.opt.colors);dv.scale.round=function(e){var t=dv.opt.map.grid;return Math.round(e/t)*t};dv.scale.x=d3.scale.linear().domain([0,d3.max(dv.data.msa,function(e){return e.x})]).range([10,dv.dim.svg.w/1.4]);dv.scale.y=d3.scale.linear().domain([0,d3.max(dv.data.msa,function(e){return e.y})]).range([10,dv.dim.svg.h/1.4]);dv.scale.xRound=function(e){return dv.scale.round(dv.scale.xOld(e))};dv.scale.yRound=function(e){return dv.scale.round(dv.scale.yOld(e))};dv.scale.xOld=d3.scale.linear().domain([0,1]).range([0,dv.dim.svg.w]);dv.scale.yOld=d3.scale.linear().domain([0,d3.max(dv.data.msa,function(e){return e.y})]).range([0,dv.dim.svg.h])};dv.update.xy=function(){for(var e=dv.data.msa.length-1;e>=0;e--){var t=dv.data.msa[e];t.xold=t.x;t.yold=t.y;t.x=dv.scale.xRound(t.x);t.y=dv.scale.xRound(t.y)}dv.util.aooToCSV(dv.data.msa)};dv.create.paths=function(){dv.path.arc=d3.svg.arc()};dv.create.rose=function(){var e,t,n;dv.data.rose=[];for(e=dv.opt.rose.distances.length-1;e>=0;e--){n=[];for(t=dv.opt.rose.petals-1;t>=0;t--)n.push(0);dv.data.rose.push(n)}};dv.create.subset=function(e,t){var n,r,i=[];dv.dato.time||dv.update.dist(19740);dv.data.fips=dv.data.fips||d3.keys(dv.dato.time);for(n=dv.data.fips.length-1;n>=0;n--){r=dv.dato.time[dv.data.fips[n]];r>e&&r<=t&&i.push(dv.data.fips[n])}return i};dv.draw.svg=function(){dv.svg.main=d3.select("body").append("svg:svg");dv.html.svg=dv.svg.main[0][0];dv.svg.map=dv.svg.main.append("svg:g").attr("class","map")};dv.redraw.svg=function(){dv.svg.main.attr("width",dv.dim.svg.w).attr("height",dv.dim.svg.h)};dv.draw.rose=function(){dv.create.rose();dv.svg.rose=dv.svg.map.append("svg:g").attr("id","rose").selectAll("g").data(dv.data.rose).enter().append("svg:g").attr("class","petal-group").style("fill",function(e,t){return dv.scale.fill(t+1)}).each(function(e){d3.select(this).selectAll("path").data(e).enter().append("svg:path").attr("class","petal")});dv.redraw.rose(28140)};dv.draw.states=function(){dv.svg.states=dv.svg.map.append("svg:g").attr("id","states").selectAll(".state").data(dv.data.states).enter().append("svg:path").attr("name",function(e){return e.properties.name}).attr("class","state").attr("d",dv.path.shape)};dv.draw.links=function(){dv.svg.links=dv.svg.map.append("svg:g").attr("id","links").selectAll(".link").data(dv.data.links).enter().append("svg:line").attr("class","link").attr("x1",function(e){return dv.scale.x(dv.dato.msa[e.c1fips].x)}).attr("y1",function(e){return dv.scale.y(dv.dato.msa[e.c1fips].y)}).attr("x2",function(e){return dv.scale.x(dv.dato.msa[e.c2fips].x)}).attr("y2",function(e){return dv.scale.y(dv.dato.msa[e.c2fips].y)})};dv.draw.cities=function(){dv.svg.cities=dv.svg.map.append("svg:g").attr("id","cities").selectAll(".city").data(dv.data.msa).enter().append("svg:circle").attr("class","city").attr("r",function(e){return dv.scale.r(e.Population)}).attr("cx",function(e){return dv.scale.x(e.x)}).attr("cy",function(e){return dv.scale.y(e.y)}).style("stroke-width",function(e){return dv.scale.strokeW(e.Population)}).style("display",function(e){return!e.Highway||e.City==="Junction"?"none":!1}).on("mouseover",function(e){dv.update.cityHover(event,e)}).on("mouseout",dv.hover.hide).on("click",function(e){dv.redraw.map(e.FIPS);dv.update.cityHover(event,e)})};dv.draw.labels=function(){dv.svg.labels=dv.svg.map.append("svg:g").attr("id","labels").selectAll(".label").data(dv.data.msa).enter().append("svg:text").attr("class","label").attr("dx",function(e){return dv.scale.x(e.x)+dv.scale.r(e.Population)+dv.scale.strokeW(e.Population)}).attr("dy",function(e){return dv.scale.y(e.y)-2}).style("display",function(e){return e.Population>dv.opt.city.popmin||e.State==="Canada"?!1:"none"}).style("font-size",function(e){return dv.scale.font(e.Population)}).text(function(e){return e.City})};dv.update.dragged=function(e){var t=e.FIPS,n=d3.select(this).attr("cx",d3.event.x).attr("cy",d3.event.y),r=n.attr("cx"),i=n.attr("cy");dv.svg.links.attr("x1",function(e){return e.c1fips===t?r:this.x1.animVal.value}).attr("y1",function(e){return e.c1fips===t?i:this.y1.animVal.value}).attr("x2",function(e){return e.c2fips===t?r:this.x2.animVal.value}).attr("y2",function(e){return e.c2fips===t?i:this.y2.animVal.value});dv.svg.labels.attr("dx",function(e){if(e.FIPS===t){dv.temp=this;return r+dv.scale.r(e.Population)+dv.scale.strokeW(e.Population)}return this.attributes[1].value}).attr("dy",function(e){return e.FIPS===t?i-2:this.attributes[2].value})};dv.update.dragend=function(e){e.x=Math.round(dv.scale.x.invert(d3.select(this).attr("cx"))*250)/250;e.y=Math.round(dv.scale.y.invert(d3.select(this).attr("cy"))*250)/250};dv.update.drag=d3.behavior.drag().on("drag",dv.update.dragged).on("dragend",dv.update.dragend);dv.update.cityToPlace=function(){var e=1e3;dv.svg.cities.transition().duration(e).attr("cx",function(e){return dv.scale.x(e.x)}).attr("cy",function(e){return dv.scale.y(e.y)});dv.svg.labels.transition().duration(e).attr("dx",function(e){return dv.scale.x(e.x)+dv.scale.r(e.Population)+dv.scale.strokeW(e.Population)}).attr("dy",function(e){return dv.scale.y(e.y)-2});dv.svg.links.transition().duration(e).attr("x1",function(e){return dv.scale.x(dv.dato.msa[e.c1fips].x)}).attr("y1",function(e){return dv.scale.y(dv.dato.msa[e.c1fips].y)}).attr("x2",function(e){return dv.scale.x(dv.dato.msa[e.c2fips].x)}).attr("y2",function(e){return dv.scale.y(dv.dato.msa[e.c2fips].y)})};dv.update.cityToGeo=function(){var e=1e3;dv.svg.cities.transition().duration(e).attr("cx",function(e){return dv.scale.projection([e.geoLng,e.geoLat])[0]}).attr("cy",function(e){return dv.scale.projection([e.geoLng,e.geoLat])[1]});dv.svg.labels.transition().duration(e).attr("dx",function(e){return dv.scale.projection([e.geoLng,e.geoLat])[0]+dv.scale.r(e.Population)+dv.scale.strokeW(e.Population)}).attr("dy",function(e){return dv.scale.projection([e.geoLng,e.geoLat])[1]-2});dv.svg.links.transition().duration(e).attr("x1",function(e){return dv.scale.projection([e.c1geoLng,e.c1geoLat])[0]}).attr("y1",function(e){return dv.scale.projection([e.c1geoLng,e.c1geoLat])[1]}).attr("x2",function(e){return dv.scale.projection([e.c2geoLng,e.c2geoLat])[0]}).attr("y2",function(e){return dv.scale.projection([e.c2geoLng,e.c2geoLat])[1]})};dv.update.cityHover=function(e,t){var n="<h5>"+t.City+", "+t.State+"</h5><ul>",r=dv.dato.msa[dv.state.oFIPS],i,s,o,u,a,f;dv.dato.dist&&dv.dato.time&&t.FIPS!==dv.state.oFIPS&&(n+="<li><strong>"+dv.format.time(dv.dato.time[t.FIPS])+" to "+r.City+" on the Hyperloop</strong></li>");n+="</ul>";n+="<table><thead><td></td><td>Hyperloop</td><td>Drive</td><td>Difference</td></thead>";for(var l=0;l<5;l++){i="nearFIPS"+l;s="nearDist"+l;o="nearDrive"+l;u=dv.calc.time(t[s]);a=t[o]/3600;f=a-u;n+="<tr>";n+="<td><strong>"+dv.dato.msa[t[i]].City+"</strong></td>";n+="<td>"+dv.format.time(u)+"</td>";n+="<td>"+dv.format.time(a)+"</td>";n+="<td>"+dv.format.time(f)+"</td>";n+="</tr>"}n+="</table></li></ul>";dv.hover.show(e,n)};dv.update.dist=function(e){function s(t){if(!dv.dato.time[t]){r=dv.calc.graph.findShortestPath(e,t);dv.update.allTimes(r)}}var t,n,r,i=[99991,99992,99994,20260,24580,13020,99995,99996,12620,39300,35620,47900,47260,27340,34820,16700,33100,27260,15180,88886,88883,41740,42220,14740];dv.dato.dist={};dv.dato.time={};dv.dato.dist[e]=0;dv.dato.time[e]=0;for(t=i.length-1;t>=0;t--){n=i[t];s(n)}for(t=dv.data.msa.length-1;t>=0;t--){n=dv.data.msa[t].FIPS;s(n)}};dv.update.anglesPetals=function(e){var t,n,r,i,s=dv.opt.rose.petals,o=dv.opt.rose.arc,u=dv.dato.msa[e];dv.dato.angle={};dv.dato.petal={};for(t=dv.data.msa.length-1;t>=0;t--){n=dv.data.msa[t];i=dv.calc.rad(u.x,u.y,n.x,n.y);dv.dato.angle[n.FIPS]=Math.round(i*180/Math.PI);r=Math.floor(i/o);r=(r+1)%(s*2);r=Math.floor(r/2);dv.dato.petal[n.FIPS]=r}};dv.update.allTimes=function(e){var t,n,r,i=0,s=e.length;for(t=1;t<s;t++){n=e[t];r=e[t-1];i+=dv.dato.network[n][r].dist;dv.dato.dist[n]=i;dv.dato.time[n]=dv.dato.time[n]||dv.calc.time(i)}};dv.update.rose=function(e){dv.create.rose();var t,n=dv.opt.rose.distances.length;for(t=0;t<n;t++)dv.update.petals(e,t);dv.redraw.rose(e)};dv.update.petals=function(e,t){var n,r,i,s,o,u,a=dv.data.rose[t],f=dv.opt.rose.distances[t],l=dv.dato.msa[e];for(n=dv.keys.fips.length-1;n>=0;n--){r=dv.keys.fips[n];i=dv.dato.time[r];if(i<f){s=dv.dato.msa[r];o=dv.dato.petal[r];u=dv.calc.xyDist(s,l);if(!a[o]||u>a[o])a[o]=u}}};dv.redraw.rose=function(e){var t=dv.dato.msa[e];dv.svg.rose.data(dv.data.rose).transition().duration().attr("transform","translate("+dv.scale.x(t.x)+","+dv.scale.y(t.y)+")").each(function(e,t){d3.select(this).selectAll("path").data(e).attr("d",function(e,n){return dv.redraw.arc(e,n,t)})})};dv.redraw.arc=function(e,t,n){var r={};r.innerRadius=n>0?dv.data.rose[n-1][t]:0;r.outerRadius=e;r.startAngle=2*t*dv.opt.rose.arc-dv.opt.rose.arc;r.endAngle=2*t*dv.opt.rose.arc+dv.opt.rose.arc;return dv.path.arc(r,t)};dv.redraw.map=function(e){dv.state.oFIPS=e;dv.update.dist(e);dv.update.anglesPetals(e);dv.update.rose(e);dv.svg.cities.style("stroke",function(e){return e.City!=="Junction"?dv.scale.fill(dv.dato.time[e.FIPS]):!1});dv.svg.links.style("stroke",function(e){return dv.scale.fill(dv.dato.time[e.c1fips])})};dv.calc.distance=function(e,t){var n,r,i,s=0,o=dv.calc.graph.findShortestPath(e,t);for(n=o.length-1;n>0;n--){r=o[n];i=o[n-1];s+=dv.dato.network[r][i].dist}return s};dv.calc.time=function(e){var t=e/1610,n=0,r=300,i=760,s=2.2,o=56.2,u=5.4;if(t>s){n+=s/(r/2);t-=s}else{n+=t/(r/2);t=0}if(t>o){n+=o/r;t-=s}else{n+=t/r;t=0}if(t>u){n+=u/(i/2);t-=s}else{n+=t/(i/2);t=0}t>0&&(n+=t/i);return n};dv.calc.xyDist=function(e,t){return Math.sqrt(Math.pow(dv.scale.x(e.x)-dv.scale.x(t.x),2)+Math.pow(dv.scale.y(e.y)-dv.scale.y(t.y),2))};dv.calc.rad=function(e,t,n,r){var i=n-e===0?Math.PI/2:Math.atan((t-r)/(e-n));n-e===0&&r-t<0?i=0:n-e<0?i=1.5*Math.PI+i:i=Math.PI/2+i;return i};dv.format.dist=function(e){return Math.round(e/1610*10)/10+" miles"};dv.format.time=function(e,t){function s(e){return e>1||e===0?"s":""}var n,r,i="";n=e*3600;e=Math.floor(n/3600);n-=e*3600;r=Math.floor(n/60);n-=r*60;n=Math.round(n%60,10);if(t){e>0&&(i=e+" hour"+s(e)+" ");r>0&&(i+=r+" minute"+s(r))}else{e>0&&(i=e+"h"+" ");r>0&&(i+=r+"m")}return i};dv.format.number=function(e){var t=1,n="";if(e<999)return 0;if(e<999999999){t=1e5;n="M"}else if(e<999999999999){t=1e8;n="B"}else if(e<999999999999999){t=1e11;n="T"}e=Math.round(e/t)/10+n;return e};dv.create.index=function(e){dv.dato[e.indexName]={};dv.keys[e.keyName]=[];var t,n,r,i=e.col,s=e.data,o=dv.dato[e.indexName],u=dv.keys[e.keyName];for(t=s.length-1;t>=0;t--){n=s[t];r=n[i];o[r]=n;u.push(r)}};dv.update.loadState=function(e,t){t=t||"data";e=e||1;dv.state[t]=dv.state[t]||0;dv.state[t]+=e;dv.state[t]===0&&dv.postload[t]()};dv.util.aooSort=function(e){e.array.sort(function(t,n){return e.reverse?n[e.key]-t[e.key]:t[e.key]-n[e.key]});return e.array};dv.hover=dv.hover||{};dv.hover.show=function(e,t){dv.html.hover||dv.hover.create();var n,r,i,s,o,u=dv.dim.win,a=dv.html.win,f={x:a.scrollX,y:a.scrollY},l=dv.opt.hover||{},c=l.margin||10,h=l.offset||10;if(e&&t){n=e.clientX;r=e.clientY-5*h;i=document.getElementById("hover");dv.html.hover.html(t);s=i.scrollHeight;o=i.scrollWidth;if(n+o+c>=u.w){n=n-2*h-o-20;n=n<f.x?c:n}if(r+s+c>=u.h){r=u.h-c-s;r=r<f.y?u.h-s-c:r}n+=f.x;r+=f.y;dv.html.hover.style("top",r+"px").style("left",n+"px").style("visibility","visible")}};dv.hover.create=function(){dv.html.hover=d3.select("body").append("div").attr("id","hover").style("display","block").attr("visibility","hidden")};dv.hover.hide=function(){dv.html.hover&&dv.html.hover.style("visibility","hidden")};dv.create.start();dv.util.aooToCSV=function(e){var t=0,n=0,r=e.length,i=0,s={},o=d3.keys(e[0]),u="",a="";for(t=0;t<r;t++){if(a===""){i=o.length;for(n=0;n<i;n++){u=o[n];a+='"'+u+'"';n<i-1&&(a+=",")}a+="</br>"}s=e[t];i=o.length;for(n=0;n<i;n++){u=o[n];a+='"'+s[u]+'"';n<i-1&&(a+=",")}a+="</br>"}dv.util.consoleToBody(a)};dv.util.consoleToBody=function(e){dv.html.console||(dv.html.console=d3.select("body").append("div").attr("id","console"));dv.html.console.html(e)};dv.util.console=function(){};dv.util.objToJSON=function(e){var t=JSON.stringify(e);dv.util.consoleToBody(t)};